{"version":3,"file":"voicebank-recorder.esm.js","sources":["../src/core/AudioEngine.js","../src/storage/StorageAdapter.js","../src/storage/IndexedDBAdapter.js","../src/storage/ServerAdapter.js","../src/storage/ElectronAdapter.js","../src/storage/CapacitorAdapter.js","../src/storage/index.js","../src/utils/PlatformDetector.js","../src/index.js"],"sourcesContent":["/**\n * AudioEngine - 跨平台音訊錄音引擎\n * \n * 功能：\n * - 封裝 Web Audio API (AudioContext, AudioWorklet)\n * - 支援 RecordRTC 錄音 (WAV 格式)\n * - 自動處理 AudioWorklet 與 ScriptProcessor fallback\n * - 提供錄音控制 (開始/停止/暫停/繼續)\n * - 事件驅動架構 (recording-start, data-available, recording-stop 等)\n * - 麥克風輸入管理與前級增益控制\n * \n * @example\n * const engine = new AudioEngine({\n *   sampleRate: 48000,\n *   autoGainControl: false,\n *   micGain: 1.0\n * });\n * \n * engine.on('recording-start', () => console.log('Started'));\n * engine.on('data-available', (pcmData) => console.log('PCM chunk', pcmData));\n * engine.on('recording-stop', (blob) => console.log('Finished', blob));\n * \n * await engine.initialize();\n * await engine.startRecording();\n * // ... 錄音中 ...\n * await engine.stopRecording();\n */\n\nexport class AudioEngine {\n    /**\n     * 創建 AudioEngine 實例\n     * @param {Object} options - 配置選項\n     * @param {number} [options.sampleRate=48000] - 採樣率\n     * @param {boolean} [options.autoGainControl=false] - 自動增益控制\n     * @param {boolean} [options.echoCancellation=false] - 回音消除\n     * @param {boolean} [options.noiseSuppression=false] - 噪音抑制\n     * @param {number} [options.micGain=1.0] - 前級增益 (1.0-6.0)\n     * @param {string} [options.deviceId] - 麥克風設備 ID\n     * @param {string} [options.workletPath='assets/js/worklet/pcm-collector.js'] - AudioWorklet 模組路徑\n     * @param {boolean} [options.preferWorklet=true] - 優先使用 AudioWorklet（支援時）\n     */\n    constructor(options = {}) {\n        // 配置選項\n        this.config = {\n            sampleRate: options.sampleRate || 48000,\n            autoGainControl: options.autoGainControl !== undefined ? options.autoGainControl : false,\n            echoCancellation: options.echoCancellation !== undefined ? options.echoCancellation : false,\n            noiseSuppression: options.noiseSuppression !== undefined ? options.noiseSuppression : false,\n            micGain: options.micGain || 1.0,\n            deviceId: options.deviceId || null,\n            workletPath: options.workletPath || 'assets/js/worklet/pcm-collector.js',\n            preferWorklet: options.preferWorklet !== undefined ? options.preferWorklet : true\n        };\n\n        // Web Audio API 物件\n        this.audioContext = null;\n        this.analyser = null;\n        this.preGainNode = null;\n        this.mediaDest = null;\n        this.analyserSilencer = null;\n\n        // AudioWorklet 相關\n        this.workletSupported = false;\n        this.workletLoaded = false;\n        this.pcmCollectorNode = null;\n        this.usingWorklet = false;\n\n        // PCM 數據收集 (AudioWorklet 模式)\n        this.pcmChunks = [];\n        this.pcmTotalSamples = 0;\n\n        // RecordRTC 錄音器\n        this.recorder = null;\n\n        // 麥克風串流\n        this.micStream = null;\n\n        // 錄音狀態\n        this.isRecording = false;\n        this.isPaused = false;\n        this.isInitialized = false;\n\n        // 時間戳記\n        this.recordStartTime = 0;\n        this.recordStopTime = 0;\n        this.recordWallStartMs = 0;\n        this.recordWallStopMs = 0;\n\n        // 最後的錄音結果\n        this.latestBlob = null;\n        this.latestUrl = null;\n\n        // 事件監聽器\n        this._eventListeners = {};\n    }\n\n    /**\n     * 初始化音訊引擎\n     * 創建 AudioContext、Analyser、Gain 節點等\n     * @returns {Promise<void>}\n     */\n    async initialize() {\n        if (this.isInitialized) {\n            return;\n        }\n\n        try {\n            // 創建 AudioContext\n            const AudioContextClass = window.AudioContext || window.webkitAudioContext;\n            this.audioContext = new AudioContextClass({ sampleRate: this.config.sampleRate });\n\n            // 創建分析器節點\n            this.analyser = this.audioContext.createAnalyser();\n            this.analyser.fftSize = 256;\n\n            // 創建前級增益節點\n            this.preGainNode = this.audioContext.createGain();\n            this.preGainNode.gain.value = this.config.micGain;\n\n            // 創建 MediaStreamDestination（供 RecordRTC 使用）\n            this.mediaDest = this.audioContext.createMediaStreamDestination();\n\n            // 連接節點：preGain -> analyser -> silencer -> destination\n            this.preGainNode.connect(this.analyser);\n            this.preGainNode.connect(this.mediaDest);\n\n            // 創建靜音節點（避免回授）\n            this.analyserSilencer = this.audioContext.createGain();\n            this.analyserSilencer.gain.value = 0;\n            this.analyser.connect(this.analyserSilencer);\n            this.analyserSilencer.connect(this.audioContext.destination);\n\n            // 檢測 AudioWorklet 支援\n            this.workletSupported = !!(\n                this.audioContext.audioWorklet && \n                window.AudioWorkletNode\n            );\n\n            // 載入 AudioWorklet 模組（如果支援且偏好使用）\n            if (this.workletSupported && this.config.preferWorklet) {\n                try {\n                    await this.audioContext.audioWorklet.addModule(this.config.workletPath);\n                    this.workletLoaded = true;\n                    this._emit('worklet-loaded', { path: this.config.workletPath });\n                } catch (error) {\n                    console.warn('載入 AudioWorklet 模組失敗，將回退到 RecordRTC:', error);\n                    this.workletLoaded = false;\n                    this._emit('worklet-load-failed', { error });\n                }\n            }\n\n            // 恢復 AudioContext（如果暫停）\n            if (this.audioContext.state === 'suspended') {\n                await this.audioContext.resume();\n            }\n\n            this.isInitialized = true;\n            this._emit('initialized', {\n                sampleRate: this.audioContext.sampleRate,\n                state: this.audioContext.state,\n                workletSupported: this.workletSupported,\n                workletLoaded: this.workletLoaded\n            });\n\n        } catch (error) {\n            this._emit('error', { stage: 'initialize', error });\n            throw error;\n        }\n    }\n\n    /**\n     * 開始錄音\n     * @returns {Promise<void>}\n     */\n    async startRecording() {\n        if (!this.isInitialized) {\n            throw new Error('AudioEngine 尚未初始化，請先調用 initialize()');\n        }\n\n        if (this.isRecording) {\n            throw new Error('已經在錄音中');\n        }\n\n        try {\n            // 確保 AudioContext 是活躍狀態\n            if (this.audioContext.state === 'suspended') {\n                await this.audioContext.resume();\n            }\n\n            // 獲取麥克風\n            await this._captureMicrophone();\n\n            // 重置 PCM 數據收集\n            this.pcmChunks = [];\n            this.pcmTotalSamples = 0;\n\n            // 清理舊的錄音結果\n            if (this.latestUrl) {\n                URL.revokeObjectURL(this.latestUrl);\n                this.latestUrl = null;\n            }\n            this.latestBlob = null;\n\n            // 記錄開始時間\n            this.recordStartTime = Date.now();\n            this.recordWallStartMs = performance.now();\n            this.recordStopTime = 0;\n            this.recordWallStopMs = 0;\n\n            // 決定使用 AudioWorklet 或 RecordRTC\n            const useWorklet = this.workletLoaded && this.config.preferWorklet;\n\n            if (useWorklet) {\n                await this._startWorkletRecording();\n            } else {\n                await this._startRecordRTCRecording();\n            }\n\n            this.isRecording = true;\n            this.isPaused = false;\n\n            this._emit('recording-start', {\n                timestamp: this.recordStartTime,\n                mode: useWorklet ? 'worklet' : 'recordrtc',\n                sampleRate: this.audioContext.sampleRate\n            });\n\n        } catch (error) {\n            this._emit('error', { stage: 'start-recording', error });\n            throw error;\n        }\n    }\n\n    /**\n     * 停止錄音\n     * @returns {Promise<Blob>} 錄音的 Blob\n     */\n    async stopRecording() {\n        if (!this.isRecording) {\n            throw new Error('目前沒有在錄音');\n        }\n\n        try {\n            this.isRecording = false;\n            this.recordStopTime = Date.now();\n            this.recordWallStopMs = performance.now();\n\n            let blob;\n\n            if (this.usingWorklet) {\n                blob = await this._stopWorkletRecording();\n            } else if (this.recorder) {\n                blob = await this._stopRecordRTCRecording();\n            } else {\n                throw new Error('沒有可用的錄音器');\n            }\n\n            // 停止麥克風\n            this._stopMicrophone();\n\n            // 儲存結果\n            this.latestBlob = blob;\n            this.latestUrl = URL.createObjectURL(blob);\n\n            const duration = (this.recordStopTime - this.recordStartTime) / 1000;\n\n            this._emit('recording-stop', {\n                blob,\n                url: this.latestUrl,\n                duration,\n                samples: this.pcmTotalSamples,\n                sampleRate: this.audioContext.sampleRate\n            });\n\n            return blob;\n\n        } catch (error) {\n            this._emit('error', { stage: 'stop-recording', error });\n            throw error;\n        }\n    }\n\n    /**\n     * 暫停錄音（僅 RecordRTC 模式支援）\n     */\n    pauseRecording() {\n        if (!this.isRecording) {\n            throw new Error('目前沒有在錄音');\n        }\n\n        if (this.usingWorklet) {\n            throw new Error('AudioWorklet 模式不支援暫停功能');\n        }\n\n        if (this.recorder && typeof this.recorder.pauseRecording === 'function') {\n            this.recorder.pauseRecording();\n            this.isPaused = true;\n            this._emit('recording-paused', { timestamp: Date.now() });\n        } else {\n            throw new Error('暫停功能不可用');\n        }\n    }\n\n    /**\n     * 繼續錄音（僅 RecordRTC 模式支援）\n     */\n    resumeRecording() {\n        if (!this.isPaused) {\n            throw new Error('錄音沒有暫停');\n        }\n\n        if (this.recorder && typeof this.recorder.resumeRecording === 'function') {\n            this.recorder.resumeRecording();\n            this.isPaused = false;\n            this._emit('recording-resumed', { timestamp: Date.now() });\n        } else {\n            throw new Error('繼續錄音功能不可用');\n        }\n    }\n\n    /**\n     * 取得最新的錄音數據\n     * @returns {Object} { blob, url, duration, samples }\n     */\n    getLatestRecording() {\n        return {\n            blob: this.latestBlob,\n            url: this.latestUrl,\n            duration: this.latestBlob ? (this.recordStopTime - this.recordStartTime) / 1000 : 0,\n            samples: this.pcmTotalSamples,\n            sampleRate: this.audioContext ? this.audioContext.sampleRate : 0\n        };\n    }\n\n    /**\n     * 取得 PCM 數據視窗（僅 AudioWorklet 模式）\n     * @param {number} start - 起始樣本索引\n     * @param {number} count - 樣本數量\n     * @returns {Float32Array|null}\n     */\n    getPcmWindow(start, count) {\n        if (!this.usingWorklet || !this.pcmChunks.length) {\n            return null;\n        }\n\n        if (start < 0) start = 0;\n        const total = this.pcmTotalSamples;\n        if (start >= total) return new Float32Array(0);\n\n        const end = Math.min(total, start + count);\n        const out = new Float32Array(end - start);\n        let offset = 0;\n        let passed = 0;\n\n        for (let i = 0; i < this.pcmChunks.length && passed < end; i++) {\n            const chunk = this.pcmChunks[i];\n            if (!chunk || !chunk.length) continue;\n\n            const cLen = chunk.length;\n            const cStart = passed;\n            const cEnd = passed + cLen;\n\n            if (cEnd <= start) {\n                passed = cEnd;\n                continue;\n            }\n\n            const segStart = Math.max(start, cStart);\n            const segEnd = Math.min(end, cEnd);\n\n            if (segEnd > segStart) {\n                const localStart = segStart - cStart;\n                const slice = chunk.subarray(localStart, localStart + (segEnd - segStart));\n                out.set(slice, offset);\n                offset += slice.length;\n            }\n\n            passed = cEnd;\n            if (segEnd >= end) break;\n        }\n\n        return out;\n    }\n\n    /**\n     * 取得 Analyser 節點（供外部波形顯示使用）\n     * @returns {AnalyserNode|null}\n     */\n    getAnalyser() {\n        return this.analyser;\n    }\n\n    /**\n     * 取得 AudioContext\n     * @returns {AudioContext|null}\n     */\n    getAudioContext() {\n        return this.audioContext;\n    }\n\n    /**\n     * 設定前級增益\n     * @param {number} gain - 增益值 (1.0-6.0)\n     */\n    setMicGain(gain) {\n        gain = Math.max(1.0, Math.min(6.0, gain));\n        this.config.micGain = gain;\n\n        if (this.preGainNode) {\n            this.preGainNode.gain.value = gain;\n        }\n\n        this._emit('mic-gain-changed', { gain });\n    }\n\n    /**\n     * 釋放資源\n     */\n    dispose() {\n        if (this.isRecording) {\n            this.stopRecording().catch(console.error);\n        }\n\n        this._stopMicrophone();\n\n        if (this.latestUrl) {\n            URL.revokeObjectURL(this.latestUrl);\n            this.latestUrl = null;\n        }\n\n        if (this.audioContext) {\n            this.audioContext.close().catch(console.error);\n            this.audioContext = null;\n        }\n\n        this.analyser = null;\n        this.preGainNode = null;\n        this.mediaDest = null;\n        this.analyserSilencer = null;\n        this.pcmCollectorNode = null;\n        this.recorder = null;\n\n        this.pcmChunks = [];\n        this.pcmTotalSamples = 0;\n\n        this.isInitialized = false;\n\n        this._emit('disposed');\n    }\n\n    // ============================================================\n    // 事件系統\n    // ============================================================\n\n    /**\n     * 註冊事件監聽器\n     * @param {string} event - 事件名稱\n     * @param {Function} handler - 處理函數\n     */\n    on(event, handler) {\n        if (!this._eventListeners[event]) {\n            this._eventListeners[event] = [];\n        }\n        this._eventListeners[event].push(handler);\n    }\n\n    /**\n     * 移除事件監聽器\n     * @param {string} event - 事件名稱\n     * @param {Function} handler - 處理函數\n     */\n    off(event, handler) {\n        if (!this._eventListeners[event]) return;\n\n        const index = this._eventListeners[event].indexOf(handler);\n        if (index > -1) {\n            this._eventListeners[event].splice(index, 1);\n        }\n    }\n\n    /**\n     * 觸發事件（內部使用）\n     * @private\n     */\n    _emit(event, data) {\n        if (!this._eventListeners[event]) return;\n\n        this._eventListeners[event].forEach(handler => {\n            try {\n                handler(data);\n            } catch (error) {\n                console.error(`事件處理器錯誤 [${event}]:`, error);\n            }\n        });\n    }\n\n    // ============================================================\n    // 私有方法 - 麥克風捕獲\n    // ============================================================\n\n    async _captureMicrophone() {\n        const constraints = {\n            audio: {\n                echoCancellation: this.config.echoCancellation,\n                noiseSuppression: this.config.noiseSuppression,\n                autoGainControl: this.config.autoGainControl\n            },\n            video: false\n        };\n\n        // 加入設備 ID 限制（如果有指定）\n        if (this.config.deviceId) {\n            constraints.audio.deviceId = { exact: this.config.deviceId };\n        }\n\n        try {\n            this.micStream = await navigator.mediaDevices.getUserMedia(constraints);\n\n            // iOS 自動增益調整\n            this._applyIOSMicGainAdjustment();\n\n            // 連接麥克風到前級增益節點\n            const source = this.audioContext.createMediaStreamSource(this.micStream);\n            source.connect(this.preGainNode);\n\n            this._emit('microphone-captured', {\n                deviceId: this.config.deviceId,\n                constraints\n            });\n\n        } catch (error) {\n            // 如果指定設備失敗，嘗試使用預設設備\n            if (error.name === 'OverconstrainedError' || error.name === 'NotFoundError') {\n                console.warn('指定的麥克風無法使用，嘗試預設設備');\n\n                delete constraints.audio.deviceId;\n                this.micStream = await navigator.mediaDevices.getUserMedia(constraints);\n\n                this._applyIOSMicGainAdjustment();\n\n                const source = this.audioContext.createMediaStreamSource(this.micStream);\n                source.connect(this.preGainNode);\n\n                this._emit('microphone-captured-fallback', { constraints });\n            } else {\n                throw error;\n            }\n        }\n    }\n\n    _stopMicrophone() {\n        if (this.micStream) {\n            this.micStream.getTracks().forEach(track => {\n                try {\n                    track.stop();\n                } catch (error) {\n                    console.warn('停止麥克風軌道失敗:', error);\n                }\n            });\n            this.micStream = null;\n        }\n    }\n\n    _applyIOSMicGainAdjustment() {\n        // iOS 上 AGC 關閉時音量偏低，自動提升增益\n        try {\n            const ua = navigator.userAgent || '';\n            const isIOS = /iphone|ipad|ipod/i.test(ua);\n\n            if (isIOS && !this.config.autoGainControl) {\n                if (Math.abs(this.config.micGain - 1.0) < 0.0001) {\n                    this.setMicGain(3.5);\n                    this._emit('ios-gain-adjusted', { gain: 3.5 });\n                }\n            }\n        } catch (error) {\n            console.warn('iOS 增益調整失敗:', error);\n        }\n    }\n\n    // ============================================================\n    // 私有方法 - AudioWorklet 錄音\n    // ============================================================\n\n    async _startWorkletRecording() {\n        try {\n            // 創建 AudioWorkletNode\n            this.pcmCollectorNode = new AudioWorkletNode(\n                this.audioContext,\n                'pcm-collector-processor'\n            );\n\n            // 監聽 PCM 數據\n            this.pcmCollectorNode.port.onmessage = (event) => {\n                const { type, pcmData } = event.data;\n\n                if (type === 'pcm-data' && pcmData) {\n                    this.pcmChunks.push(new Float32Array(pcmData));\n                    this.pcmTotalSamples += pcmData.length;\n\n                    this._emit('data-available', {\n                        pcmData: new Float32Array(pcmData),\n                        totalSamples: this.pcmTotalSamples,\n                        mode: 'worklet'\n                    });\n                }\n            };\n\n            // 連接節點：preGain -> pcmCollector -> analyser\n            this.preGainNode.connect(this.pcmCollectorNode);\n            this.pcmCollectorNode.connect(this.audioContext.destination);\n\n            this.usingWorklet = true;\n\n        } catch (error) {\n            console.error('AudioWorklet 啟動失敗，回退到 RecordRTC:', error);\n            this.usingWorklet = false;\n            await this._startRecordRTCRecording();\n        }\n    }\n\n    async _stopWorkletRecording() {\n        try {\n            // 斷開 AudioWorkletNode\n            if (this.pcmCollectorNode) {\n                this.pcmCollectorNode.port.onmessage = null;\n                this.preGainNode.disconnect(this.pcmCollectorNode);\n                this.pcmCollectorNode.disconnect();\n                this.pcmCollectorNode = null;\n            }\n\n            // 合併 PCM 數據並轉換為 WAV\n            if (this.pcmChunks.length === 0) {\n                throw new Error('沒有錄音數據');\n            }\n\n            const merged = new Float32Array(this.pcmTotalSamples);\n            let offset = 0;\n\n            for (const chunk of this.pcmChunks) {\n                merged.set(chunk, offset);\n                offset += chunk.length;\n            }\n\n            // 轉換為 16-bit PCM WAV\n            const wavBuffer = this._buildWavFromFloat32Mono(\n                merged,\n                this.audioContext.sampleRate\n            );\n\n            const blob = new Blob([wavBuffer], { type: 'audio/wav' });\n\n            this.usingWorklet = false;\n\n            return blob;\n\n        } catch (error) {\n            console.error('AudioWorklet 停止失敗:', error);\n            throw error;\n        }\n    }\n\n    // ============================================================\n    // 私有方法 - RecordRTC 錄音\n    // ============================================================\n\n    async _startRecordRTCRecording() {\n        return new Promise((resolve, reject) => {\n            try {\n                // 檢查 RecordRTC 是否可用\n                if (typeof RecordRTC === 'undefined') {\n                    reject(new Error('RecordRTC 未載入'));\n                    return;\n                }\n\n                const recordStream = this.mediaDest.stream || this.micStream;\n\n                this.recorder = RecordRTC(recordStream, {\n                    type: 'audio',\n                    mimeType: 'audio/wav',\n                    recorderType: StereoAudioRecorder,\n                    numberOfAudioChannels: 1,\n                    bufferSize: 4096,\n                    timeSlice: 100,\n                    ondataavailable: (blob) => {\n                        this._emit('data-available', {\n                            blob,\n                            mode: 'recordrtc'\n                        });\n                    }\n                });\n\n                this.recorder.startRecording();\n                this.usingWorklet = false;\n\n                resolve();\n\n            } catch (error) {\n                reject(error);\n            }\n        });\n    }\n\n    async _stopRecordRTCRecording() {\n        return new Promise((resolve, reject) => {\n            try {\n                if (!this.recorder) {\n                    reject(new Error('RecordRTC 錄音器不存在'));\n                    return;\n                }\n\n                this.recorder.stopRecording(() => {\n                    try {\n                        const blob = this.recorder.getBlob();\n\n                        // 清理錄音器\n                        this.recorder = null;\n\n                        resolve(blob);\n                    } catch (error) {\n                        reject(error);\n                    }\n                });\n\n            } catch (error) {\n                reject(error);\n            }\n        });\n    }\n\n    // ============================================================\n    // 私有方法 - WAV 格式轉換\n    // ============================================================\n\n    _buildWavFromFloat32Mono(float32Data, sampleRate) {\n        const numSamples = float32Data.length;\n        const buffer = new ArrayBuffer(44 + numSamples * 2);\n        const view = new DataView(buffer);\n\n        // WAV Header\n        this._writeString(view, 0, 'RIFF');\n        view.setUint32(4, 36 + numSamples * 2, true);\n        this._writeString(view, 8, 'WAVE');\n        this._writeString(view, 12, 'fmt ');\n        view.setUint32(16, 16, true); // fmt chunk size\n        view.setUint16(20, 1, true);  // audio format (PCM)\n        view.setUint16(22, 1, true);  // number of channels\n        view.setUint32(24, sampleRate, true);\n        view.setUint32(28, sampleRate * 2, true); // byte rate\n        view.setUint16(32, 2, true);  // block align\n        view.setUint16(34, 16, true); // bits per sample\n        this._writeString(view, 36, 'data');\n        view.setUint32(40, numSamples * 2, true);\n\n        // PCM Data (float32 -> int16)\n        let offset = 44;\n        for (let i = 0; i < numSamples; i++) {\n            const sample = Math.max(-1, Math.min(1, float32Data[i]));\n            const int16 = sample < 0 ? sample * 0x8000 : sample * 0x7FFF;\n            view.setInt16(offset, int16, true);\n            offset += 2;\n        }\n\n        return buffer;\n    }\n\n    _writeString(view, offset, string) {\n        for (let i = 0; i < string.length; i++) {\n            view.setUint8(offset + i, string.charCodeAt(i));\n        }\n    }\n}\n\nexport default AudioEngine;\n","/**\n * StorageAdapter - 儲存適配器基類\n * 定義統一的儲存介面，支援多種儲存後端\n */\n\nexport class StorageAdapter {\n  /**\n   * 儲存音訊檔案\n   * @param {Blob} blob - 音訊 Blob 物件\n   * @param {string} filename - 檔案名稱\n   * @param {Object} metadata - 元數據（可選）\n   * @returns {Promise<string>} 檔案 ID 或 URL\n   */\n  async save(blob, filename, metadata = {}) {\n    throw new Error('save() must be implemented by subclass');\n  }\n  \n  /**\n   * 載入音訊檔案\n   * @param {string} id - 檔案 ID 或名稱\n   * @returns {Promise<Blob>} 音訊 Blob 物件\n   */\n  async load(id) {\n    throw new Error('load() must be implemented by subclass');\n  }\n  \n  /**\n   * 刪除音訊檔案\n   * @param {string} id - 檔案 ID 或名稱\n   * @returns {Promise<boolean>} 是否成功刪除\n   */\n  async delete(id) {\n    throw new Error('delete() must be implemented by subclass');\n  }\n  \n  /**\n   * 列出所有檔案\n   * @returns {Promise<Array>} 檔案列表\n   */\n  async list() {\n    throw new Error('list() must be implemented by subclass');\n  }\n  \n  /**\n   * 檢查檔案是否存在\n   * @param {string} id - 檔案 ID 或名稱\n   * @returns {Promise<boolean>}\n   */\n  async exists(id) {\n    try {\n      await this.load(id);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n  \n  /**\n   * 清空所有檔案（謹慎使用）\n   * @returns {Promise<number>} 刪除的檔案數量\n   */\n  async clear() {\n    const files = await this.list();\n    let count = 0;\n    \n    for (const file of files) {\n      try {\n        await this.delete(file.id || file.filename);\n        count++;\n      } catch (error) {\n        console.error('Failed to delete file:', file, error);\n      }\n    }\n    \n    return count;\n  }\n}\n\nexport default StorageAdapter;\n","/**\n * IndexedDBAdapter - IndexedDB 儲存實現\n * 用於瀏覽器端本地儲存，無需伺服器\n */\n\nimport { StorageAdapter } from './StorageAdapter.js';\n\nexport class IndexedDBAdapter extends StorageAdapter {\n  /**\n   * 建構函數\n   * @param {string} dbName - 資料庫名稱\n   * @param {string} storeName - 儲存區名稱\n   * @param {number} version - 資料庫版本\n   */\n  constructor(dbName = 'VoiceBankDB', storeName = 'recordings', version = 1) {\n    super();\n    this.dbName = dbName;\n    this.storeName = storeName;\n    this.version = version;\n    this.db = null;\n  }\n  \n  /**\n   * 初始化資料庫\n   * @returns {Promise<IDBDatabase>}\n   */\n  async initialize() {\n    if (this.db) {\n      return this.db;\n    }\n    \n    return new Promise((resolve, reject) => {\n      const request = indexedDB.open(this.dbName, this.version);\n      \n      request.onerror = () => {\n        reject(new Error(`Failed to open IndexedDB: ${request.error}`));\n      };\n      \n      request.onsuccess = () => {\n        this.db = request.result;\n        resolve(this.db);\n      };\n      \n      request.onupgradeneeded = (event) => {\n        const db = event.target.result;\n        \n        // 創建物件儲存區（如果不存在）\n        if (!db.objectStoreNames.contains(this.storeName)) {\n          const store = db.createObjectStore(this.storeName, { \n            keyPath: 'id', \n            autoIncrement: true \n          });\n          \n          // 創建索引\n          store.createIndex('filename', 'filename', { unique: false });\n          store.createIndex('timestamp', 'timestamp', { unique: false });\n          store.createIndex('duration', 'duration', { unique: false });\n        }\n      };\n    });\n  }\n  \n  /**\n   * 儲存音訊檔案\n   * @param {Blob} blob - 音訊 Blob\n   * @param {string} filename - 檔案名稱\n   * @param {Object} metadata - 元數據\n   * @returns {Promise<string>} 檔案 ID\n   */\n  async save(blob, filename, metadata = {}) {\n    await this.initialize();\n    \n    return new Promise((resolve, reject) => {\n      const transaction = this.db.transaction([this.storeName], 'readwrite');\n      const store = transaction.objectStore(this.storeName);\n      \n      const record = {\n        filename: filename,\n        blob: blob,\n        size: blob.size,\n        type: blob.type,\n        timestamp: Date.now(),\n        metadata: metadata\n      };\n      \n      const request = store.add(record);\n      \n      request.onsuccess = () => {\n        resolve(String(request.result));\n      };\n      \n      request.onerror = () => {\n        reject(new Error(`Failed to save recording: ${request.error}`));\n      };\n      \n      transaction.onerror = () => {\n        reject(new Error(`Transaction failed: ${transaction.error}`));\n      };\n    });\n  }\n  \n  /**\n   * 載入音訊檔案\n   * @param {string} id - 檔案 ID\n   * @returns {Promise<Blob>}\n   */\n  async load(id) {\n    await this.initialize();\n    \n    return new Promise((resolve, reject) => {\n      const transaction = this.db.transaction([this.storeName], 'readonly');\n      const store = transaction.objectStore(this.storeName);\n      const request = store.get(Number(id));\n      \n      request.onsuccess = () => {\n        const record = request.result;\n        if (record && record.blob) {\n          resolve(record.blob);\n        } else {\n          reject(new Error(`Recording not found: ${id}`));\n        }\n      };\n      \n      request.onerror = () => {\n        reject(new Error(`Failed to load recording: ${request.error}`));\n      };\n    });\n  }\n  \n  /**\n   * 刪除音訊檔案\n   * @param {string} id - 檔案 ID\n   * @returns {Promise<boolean>}\n   */\n  async delete(id) {\n    await this.initialize();\n    \n    return new Promise((resolve, reject) => {\n      const transaction = this.db.transaction([this.storeName], 'readwrite');\n      const store = transaction.objectStore(this.storeName);\n      const request = store.delete(Number(id));\n      \n      request.onsuccess = () => {\n        resolve(true);\n      };\n      \n      request.onerror = () => {\n        reject(new Error(`Failed to delete recording: ${request.error}`));\n      };\n    });\n  }\n  \n  /**\n   * 列出所有檔案\n   * @returns {Promise<Array>}\n   */\n  async list() {\n    await this.initialize();\n    \n    return new Promise((resolve, reject) => {\n      const transaction = this.db.transaction([this.storeName], 'readonly');\n      const store = transaction.objectStore(this.storeName);\n      const request = store.getAll();\n      \n      request.onsuccess = () => {\n        const records = request.result.map(record => ({\n          id: String(record.id),\n          filename: record.filename,\n          size: record.size,\n          type: record.type,\n          timestamp: record.timestamp,\n          date: new Date(record.timestamp),\n          metadata: record.metadata || {}\n        }));\n        resolve(records);\n      };\n      \n      request.onerror = () => {\n        reject(new Error(`Failed to list recordings: ${request.error}`));\n      };\n    });\n  }\n  \n  /**\n   * 根據檔名搜尋\n   * @param {string} filename - 檔案名稱（支援部分匹配）\n   * @returns {Promise<Array>}\n   */\n  async searchByFilename(filename) {\n    const allRecords = await this.list();\n    return allRecords.filter(record => \n      record.filename.toLowerCase().includes(filename.toLowerCase())\n    );\n  }\n  \n  /**\n   * 取得儲存空間使用情況\n   * @returns {Promise<Object>}\n   */\n  async getStorageInfo() {\n    const records = await this.list();\n    const totalSize = records.reduce((sum, record) => sum + record.size, 0);\n    \n    return {\n      count: records.length,\n      totalSize: totalSize,\n      totalSizeMB: (totalSize / (1024 * 1024)).toFixed(2),\n      records: records\n    };\n  }\n  \n  /**\n   * 清空所有錄音\n   * @returns {Promise<number>} 刪除的數量\n   */\n  async clear() {\n    await this.initialize();\n    \n    return new Promise((resolve, reject) => {\n      const transaction = this.db.transaction([this.storeName], 'readwrite');\n      const store = transaction.objectStore(this.storeName);\n      \n      // 先取得數量\n      const countRequest = store.count();\n      \n      countRequest.onsuccess = () => {\n        const count = countRequest.result;\n        \n        // 清空儲存區\n        const clearRequest = store.clear();\n        \n        clearRequest.onsuccess = () => {\n          resolve(count);\n        };\n        \n        clearRequest.onerror = () => {\n          reject(new Error(`Failed to clear recordings: ${clearRequest.error}`));\n        };\n      };\n      \n      countRequest.onerror = () => {\n        reject(new Error(`Failed to count recordings: ${countRequest.error}`));\n      };\n    });\n  }\n  \n  /**\n   * 取得瀏覽器儲存空間配額資訊（如果可用）\n   * @returns {Promise<Object|null>}\n   */\n  async getStorageEstimate() {\n    if ('storage' in navigator && 'estimate' in navigator.storage) {\n      try {\n        const estimate = await navigator.storage.estimate();\n        return {\n          usage: estimate.usage,\n          quota: estimate.quota,\n          usageMB: (estimate.usage / (1024 * 1024)).toFixed(2),\n          quotaMB: (estimate.quota / (1024 * 1024)).toFixed(2),\n          usagePercent: ((estimate.usage / estimate.quota) * 100).toFixed(2)\n        };\n      } catch (error) {\n        console.warn('Failed to get storage estimate:', error);\n        return null;\n      }\n    }\n    return null;\n  }\n  \n  /**\n   * 關閉資料庫連接\n   */\n  close() {\n    if (this.db) {\n      this.db.close();\n      this.db = null;\n    }\n  }\n}\n\nexport default IndexedDBAdapter;\n","/**\n * ServerAdapter - 伺服器儲存適配器\n * 支援 PHP/Node.js 等後端儲存方案\n */\n\nimport { StorageAdapter } from './StorageAdapter.js';\n\nexport class ServerAdapter extends StorageAdapter {\n  /**\n   * 建構函數\n   * @param {Object} config - 配置選項\n   * @param {string} config.baseURL - 基礎 URL\n   * @param {string} config.saveEndpoint - 上傳端點\n   * @param {string} config.loadEndpoint - 下載端點\n   * @param {string} config.deleteEndpoint - 刪除端點\n   * @param {string} config.listEndpoint - 列表端點（可選）\n   */\n  constructor(config = {}) {\n    super();\n    this.baseURL = config.baseURL || '';\n    this.saveEndpoint = config.saveEndpoint || '/backend/save.php';\n    this.loadEndpoint = config.loadEndpoint || '/public/uploads/';\n    this.deleteEndpoint = config.deleteEndpoint || '/backend/delete.php';\n    this.listEndpoint = config.listEndpoint || '/api/recordings';\n    this.headers = config.headers || {};\n  }\n  \n  /**\n   * 儲存音訊檔案\n   * @param {Blob} blob - 音訊 Blob\n   * @param {string} filename - 檔案名稱\n   * @param {Object} metadata - 元數據\n   * @returns {Promise<string>} 檔案名稱\n   */\n  async save(blob, filename, metadata = {}) {\n    const formData = new FormData();\n    formData.append('audio-blob', blob);\n    formData.append('audio-filename', filename);\n    \n    if (metadata && Object.keys(metadata).length > 0) {\n      formData.append('metadata', JSON.stringify(metadata));\n    }\n    \n    try {\n      const response = await fetch(this.baseURL + this.saveEndpoint, {\n        method: 'POST',\n        body: formData,\n        headers: this.headers\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Upload failed: ${response.status} ${response.statusText}`);\n      }\n      \n      const result = await response.text();\n      \n      // 檢查 PHP 端點的回應（通常是 'success'）\n      if (result.toLowerCase().includes('success')) {\n        return filename;\n      } else {\n        throw new Error(`Server error: ${result}`);\n      }\n    } catch (error) {\n      console.error('Save error:', error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 載入音訊檔案\n   * @param {string} filename - 檔案名稱\n   * @returns {Promise<Blob>}\n   */\n  async load(filename) {\n    try {\n      const url = this.baseURL + this.loadEndpoint + filename;\n      const response = await fetch(url, {\n        headers: this.headers\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Load failed: ${response.status} ${response.statusText}`);\n      }\n      \n      return await response.blob();\n    } catch (error) {\n      console.error('Load error:', error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 刪除音訊檔案\n   * @param {string} filename - 檔案名稱\n   * @returns {Promise<boolean>}\n   */\n  async delete(filename) {\n    try {\n      const response = await fetch(this.baseURL + this.deleteEndpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          ...this.headers\n        },\n        body: JSON.stringify({ filename })\n      });\n      \n      if (!response.ok) {\n        throw new Error(`Delete failed: ${response.status} ${response.statusText}`);\n      }\n      \n      const result = await response.text();\n      return result.toLowerCase().includes('success');\n    } catch (error) {\n      console.error('Delete error:', error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 列出所有檔案\n   * @returns {Promise<Array>}\n   */\n  async list() {\n    try {\n      const response = await fetch(this.baseURL + this.listEndpoint, {\n        headers: this.headers\n      });\n      \n      if (!response.ok) {\n        throw new Error(`List failed: ${response.status} ${response.statusText}`);\n      }\n      \n      const data = await response.json();\n      return Array.isArray(data) ? data : [];\n    } catch (error) {\n      console.error('List error:', error);\n      // 如果後端不支援 list 操作，返回空陣列\n      return [];\n    }\n  }\n  \n  /**\n   * 使用 XMLHttpRequest 上傳（帶進度回調）\n   * @param {Blob} blob - 音訊 Blob\n   * @param {string} filename - 檔案名稱\n   * @param {Object} metadata - 元數據\n   * @param {Function} onProgress - 進度回調 (percent)\n   * @returns {Promise<string>}\n   */\n  async saveWithProgress(blob, filename, metadata = {}, onProgress = null) {\n    return new Promise((resolve, reject) => {\n      const formData = new FormData();\n      formData.append('audio-blob', blob);\n      formData.append('audio-filename', filename);\n      \n      if (metadata && Object.keys(metadata).length > 0) {\n        formData.append('metadata', JSON.stringify(metadata));\n      }\n      \n      const xhr = new XMLHttpRequest();\n      \n      // 進度事件\n      if (onProgress) {\n        xhr.upload.addEventListener('progress', (e) => {\n          if (e.lengthComputable) {\n            const percent = (e.loaded / e.total) * 100;\n            onProgress(percent);\n          }\n        });\n      }\n      \n      // 完成事件\n      xhr.addEventListener('load', () => {\n        if (xhr.status >= 200 && xhr.status < 300) {\n          const result = xhr.responseText;\n          if (result.toLowerCase().includes('success')) {\n            resolve(filename);\n          } else {\n            reject(new Error(`Server error: ${result}`));\n          }\n        } else {\n          reject(new Error(`Upload failed: ${xhr.status} ${xhr.statusText}`));\n        }\n      });\n      \n      // 錯誤事件\n      xhr.addEventListener('error', () => {\n        reject(new Error('Network error during upload'));\n      });\n      \n      // 取消事件\n      xhr.addEventListener('abort', () => {\n        reject(new Error('Upload cancelled'));\n      });\n      \n      // 發送請求\n      xhr.open('POST', this.baseURL + this.saveEndpoint);\n      \n      // 設定自定義 headers\n      Object.keys(this.headers).forEach(key => {\n        xhr.setRequestHeader(key, this.headers[key]);\n      });\n      \n      xhr.send(formData);\n    });\n  }\n}\n\nexport default ServerAdapter;\n","/**\n * ElectronAdapter - Electron 檔案系統儲存適配器\n * 使用 Electron 的 IPC 通訊與主進程進行檔案操作\n */\n\nimport { StorageAdapter } from './StorageAdapter.js';\n\nexport class ElectronAdapter extends StorageAdapter {\n  /**\n   * 建構函數\n   * @param {string} savePath - 預設儲存路徑（相對於用戶文件目錄）\n   */\n  constructor(savePath = 'recordings') {\n    super();\n    this.savePath = savePath;\n    \n    // 檢查 Electron API 是否可用\n    if (typeof window === 'undefined' || !window.electronAPI) {\n      throw new Error('Electron API not available. Make sure preload script is properly configured.');\n    }\n    \n    this.electronAPI = window.electronAPI;\n  }\n  \n  /**\n   * 儲存音訊檔案\n   * @param {Blob} blob - 音訊 Blob\n   * @param {string} filename - 檔案名稱\n   * @param {Object} metadata - 元數據\n   * @returns {Promise<string>} 檔案路徑\n   */\n  async save(blob, filename, metadata = {}) {\n    try {\n      // 將 Blob 轉換為 ArrayBuffer\n      const arrayBuffer = await blob.arrayBuffer();\n      \n      // 轉換為普通陣列（以便通過 IPC 傳遞）\n      const buffer = Array.from(new Uint8Array(arrayBuffer));\n      \n      // 呼叫 Electron API\n      const result = await this.electronAPI.saveRecording({\n        filename,\n        buffer,\n        metadata: {\n          ...metadata,\n          size: blob.size,\n          type: blob.type,\n          timestamp: Date.now()\n        }\n      });\n      \n      if (result.success) {\n        return result.id || result.path;\n      } else {\n        throw new Error(result.error || 'Save failed');\n      }\n    } catch (error) {\n      console.error('Electron save error:', error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 載入音訊檔案\n   * @param {string} filePath - 檔案路徑\n   * @returns {Promise<Blob>}\n   */\n  async load(filePath) {\n    try {\n      // 從 Electron 讀取檔案\n      const buffer = await this.electronAPI.loadRecording(filePath);\n      \n      // 將 Buffer 轉換為 Blob\n      const uint8Array = new Uint8Array(buffer);\n      return new Blob([uint8Array], { type: 'audio/wav' });\n    } catch (error) {\n      console.error('Electron load error:', error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 刪除音訊檔案\n   * @param {string} filePath - 檔案路徑\n   * @returns {Promise<boolean>}\n   */\n  async delete(filePath) {\n    try {\n      const result = await this.electronAPI.deleteRecording(filePath);\n      return result.success;\n    } catch (error) {\n      console.error('Electron delete error:', error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 列出所有檔案\n   * @param {string} directory - 目錄路徑（可選）\n   * @returns {Promise<Array>}\n   */\n  async list(directory = null) {\n    try {\n      const recordings = await this.electronAPI.listRecordings(directory);\n      return recordings || [];\n    } catch (error) {\n      console.error('Electron list error:', error);\n      return [];\n    }\n  }\n  \n  /**\n   * 開啟檔案選擇對話框\n   * @returns {Promise<string|null>} 選擇的檔案路徑\n   */\n  async openFile() {\n    try {\n      if (this.electronAPI.openFile) {\n        return await this.electronAPI.openFile();\n      }\n      throw new Error('openFile API not available');\n    } catch (error) {\n      console.error('Electron openFile error:', error);\n      return null;\n    }\n  }\n  \n  /**\n   * 開啟另存為對話框\n   * @param {Blob} blob - 要儲存的 Blob\n   * @param {string} defaultFilename - 預設檔案名稱\n   * @returns {Promise<string|null>} 儲存的檔案路徑\n   */\n  async saveAs(blob, defaultFilename = 'recording.wav') {\n    try {\n      const arrayBuffer = await blob.arrayBuffer();\n      const buffer = Array.from(new Uint8Array(arrayBuffer));\n      \n      if (this.electronAPI.saveAs) {\n        const result = await this.electronAPI.saveAs({\n          filename: defaultFilename,\n          buffer\n        });\n        \n        return result.success ? result.path : null;\n      }\n      \n      // 如果沒有 saveAs API，使用預設的 save\n      return await this.save(blob, defaultFilename);\n    } catch (error) {\n      console.error('Electron saveAs error:', error);\n      return null;\n    }\n  }\n  \n  /**\n   * 在檔案管理器中顯示檔案\n   * @param {string} filePath - 檔案路徑\n   * @returns {Promise<boolean>}\n   */\n  async showInFolder(filePath) {\n    try {\n      if (this.electronAPI.showInFolder) {\n        await this.electronAPI.showInFolder(filePath);\n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error('Electron showInFolder error:', error);\n      return false;\n    }\n  }\n}\n\nexport default ElectronAdapter;\n","/**\n * CapacitorAdapter - Capacitor 檔案系統儲存適配器\n * 使用 Capacitor Filesystem Plugin 在移動裝置上儲存檔案\n */\n\nimport { StorageAdapter } from './StorageAdapter.js';\n\nexport class CapacitorAdapter extends StorageAdapter {\n  /**\n   * 建構函數\n   * @param {string} directory - 儲存目錄名稱\n   */\n  constructor(directory = 'recordings') {\n    super();\n    this.directory = directory;\n    \n    // 檢查 Capacitor 是否可用\n    if (typeof window === 'undefined' || !window.Capacitor) {\n      throw new Error('Capacitor not available. Make sure Capacitor is properly initialized.');\n    }\n    \n    this.Capacitor = window.Capacitor;\n    this.initialized = false;\n  }\n  \n  /**\n   * 初始化（確保目錄存在）\n   * @returns {Promise<void>}\n   */\n  async initialize() {\n    if (this.initialized) return;\n    \n    try {\n      const { Filesystem, Directory } = this.Capacitor.Plugins;\n      \n      // 嘗試讀取目錄，如果不存在則創建\n      try {\n        await Filesystem.readdir({\n          path: this.directory,\n          directory: Directory.Documents\n        });\n      } catch (e) {\n        // 目錄不存在，創建它\n        await Filesystem.mkdir({\n          path: this.directory,\n          directory: Directory.Documents,\n          recursive: true\n        });\n      }\n      \n      this.initialized = true;\n    } catch (error) {\n      console.error('Capacitor initialization error:', error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 儲存音訊檔案\n   * @param {Blob} blob - 音訊 Blob\n   * @param {string} filename - 檔案名稱\n   * @param {Object} metadata - 元數據\n   * @returns {Promise<string>} 檔案名稱\n   */\n  async save(blob, filename, metadata = {}) {\n    await this.initialize();\n    \n    try {\n      const { Filesystem, Directory } = this.Capacitor.Plugins;\n      \n      // 轉換 Blob 為 base64\n      const base64Data = await this.blobToBase64(blob);\n      \n      // 儲存音訊檔案\n      await Filesystem.writeFile({\n        path: `${this.directory}/${filename}`,\n        data: base64Data,\n        directory: Directory.Documents\n      });\n      \n      // 儲存元數據\n      if (metadata && Object.keys(metadata).length > 0) {\n        const metadataWithDefaults = {\n          ...metadata,\n          size: blob.size,\n          type: blob.type,\n          timestamp: Date.now()\n        };\n        \n        await Filesystem.writeFile({\n          path: `${this.directory}/${filename}.meta.json`,\n          data: JSON.stringify(metadataWithDefaults),\n          directory: Directory.Documents,\n          encoding: 'utf8'\n        });\n      }\n      \n      return filename;\n    } catch (error) {\n      console.error('Capacitor save error:', error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 載入音訊檔案\n   * @param {string} filename - 檔案名稱\n   * @returns {Promise<Blob>}\n   */\n  async load(filename) {\n    await this.initialize();\n    \n    try {\n      const { Filesystem, Directory } = this.Capacitor.Plugins;\n      \n      const result = await Filesystem.readFile({\n        path: `${this.directory}/${filename}`,\n        directory: Directory.Documents\n      });\n      \n      // 將 base64 轉換為 Blob\n      return this.base64ToBlob(result.data, 'audio/wav');\n    } catch (error) {\n      console.error('Capacitor load error:', error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 刪除音訊檔案\n   * @param {string} filename - 檔案名稱\n   * @returns {Promise<boolean>}\n   */\n  async delete(filename) {\n    await this.initialize();\n    \n    try {\n      const { Filesystem, Directory } = this.Capacitor.Plugins;\n      \n      // 刪除音訊檔案\n      await Filesystem.deleteFile({\n        path: `${this.directory}/${filename}`,\n        directory: Directory.Documents\n      });\n      \n      // 嘗試刪除元數據（如果存在）\n      try {\n        await Filesystem.deleteFile({\n          path: `${this.directory}/${filename}.meta.json`,\n          directory: Directory.Documents\n        });\n      } catch (e) {\n        // 元數據可能不存在，忽略錯誤\n      }\n      \n      return true;\n    } catch (error) {\n      console.error('Capacitor delete error:', error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 列出所有檔案\n   * @returns {Promise<Array>}\n   */\n  async list() {\n    await this.initialize();\n    \n    try {\n      const { Filesystem, Directory } = this.Capacitor.Plugins;\n      \n      const result = await Filesystem.readdir({\n        path: this.directory,\n        directory: Directory.Documents\n      });\n      \n      // 過濾掉元數據檔案，只保留音訊檔案\n      const audioFiles = result.files.filter(f => !f.endsWith('.meta.json'));\n      \n      // 為每個檔案載入元數據\n      const recordings = await Promise.all(\n        audioFiles.map(async (filename) => {\n          let metadata = {};\n          \n          try {\n            const metaResult = await Filesystem.readFile({\n              path: `${this.directory}/${filename}.meta.json`,\n              directory: Directory.Documents,\n              encoding: 'utf8'\n            });\n            metadata = JSON.parse(metaResult.data);\n          } catch (e) {\n            // 沒有元數據\n          }\n          \n          return {\n            id: filename,\n            filename: filename,\n            metadata: metadata,\n            timestamp: metadata.timestamp || 0,\n            date: metadata.timestamp ? new Date(metadata.timestamp) : null,\n            size: metadata.size || 0,\n            type: metadata.type || 'audio/wav'\n          };\n        })\n      );\n      \n      // 按時間排序（最新的在前）\n      recordings.sort((a, b) => b.timestamp - a.timestamp);\n      \n      return recordings;\n    } catch (error) {\n      console.error('Capacitor list error:', error);\n      return [];\n    }\n  }\n  \n  /**\n   * 取得檔案的 URI（用於播放）\n   * @param {string} filename - 檔案名稱\n   * @returns {Promise<string>} 檔案 URI\n   */\n  async getUri(filename) {\n    await this.initialize();\n    \n    try {\n      const { Filesystem, Directory } = this.Capacitor.Plugins;\n      \n      const result = await Filesystem.getUri({\n        path: `${this.directory}/${filename}`,\n        directory: Directory.Documents\n      });\n      \n      return result.uri;\n    } catch (error) {\n      console.error('Capacitor getUri error:', error);\n      throw error;\n    }\n  }\n  \n  /**\n   * Blob 轉 base64\n   * @param {Blob} blob\n   * @returns {Promise<string>}\n   */\n  blobToBase64(blob) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        // 移除 data:audio/wav;base64, 前綴\n        const base64 = reader.result.split(',')[1];\n        resolve(base64);\n      };\n      reader.onerror = reject;\n      reader.readAsDataURL(blob);\n    });\n  }\n  \n  /**\n   * base64 轉 Blob\n   * @param {string} base64\n   * @param {string} mimeType\n   * @returns {Blob}\n   */\n  base64ToBlob(base64, mimeType = 'audio/wav') {\n    const byteCharacters = atob(base64);\n    const byteNumbers = new Array(byteCharacters.length);\n    \n    for (let i = 0; i < byteCharacters.length; i++) {\n      byteNumbers[i] = byteCharacters.charCodeAt(i);\n    }\n    \n    const byteArray = new Uint8Array(byteNumbers);\n    return new Blob([byteArray], { type: mimeType });\n  }\n  \n  /**\n   * 取得儲存空間資訊\n   * @returns {Promise<Object>}\n   */\n  async getStorageInfo() {\n    const recordings = await this.list();\n    const totalSize = recordings.reduce((sum, r) => sum + (r.size || 0), 0);\n    \n    return {\n      count: recordings.length,\n      totalSize: totalSize,\n      totalSizeMB: (totalSize / (1024 * 1024)).toFixed(2),\n      recordings: recordings\n    };\n  }\n}\n\nexport default CapacitorAdapter;\n","/**\n * Storage Module - 儲存模組統一入口\n * 匯出所有儲存適配器\n */\n\nexport { StorageAdapter } from './StorageAdapter.js';\nexport { IndexedDBAdapter } from './IndexedDBAdapter.js';\nexport { ServerAdapter } from './ServerAdapter.js';\nexport { ElectronAdapter } from './ElectronAdapter.js';\nexport { CapacitorAdapter } from './CapacitorAdapter.js';\n\n/**\n * StorageFactory - 儲存適配器工廠\n * 根據配置自動創建適當的儲存適配器\n */\nexport class StorageFactory {\n  /**\n   * 創建儲存適配器\n   * @param {Object} config - 配置選項\n   * @param {string} config.type - 儲存類型 ('browser'|'electron'|'capacitor'|'server'|'auto')\n   * @param {Object} config.options - 適配器特定選項\n   * @returns {StorageAdapter}\n   */\n  static create(config = {}) {\n    const type = config.type || 'auto';\n    const options = config.options || {};\n    \n    // 自動偵測\n    if (type === 'auto') {\n      return this.createAuto(options);\n    }\n    \n    // 根據類型創建\n    switch (type.toLowerCase()) {\n      case 'browser':\n      case 'indexeddb':\n        const { IndexedDBAdapter } = require('./IndexedDBAdapter.js');\n        return new IndexedDBAdapter(\n          options.dbName,\n          options.storeName,\n          options.version\n        );\n      \n      case 'electron':\n        const { ElectronAdapter } = require('./ElectronAdapter.js');\n        return new ElectronAdapter(options.savePath);\n      \n      case 'capacitor':\n        const { CapacitorAdapter } = require('./CapacitorAdapter.js');\n        return new CapacitorAdapter(options.directory);\n      \n      case 'server':\n      case 'php':\n      case 'nodejs':\n        const { ServerAdapter } = require('./ServerAdapter.js');\n        return new ServerAdapter(options);\n      \n      default:\n        throw new Error(`Unknown storage type: ${type}`);\n    }\n  }\n  \n  /**\n   * 自動創建適配器（根據環境）\n   * @param {Object} options - 選項\n   * @returns {StorageAdapter}\n   */\n  static createAuto(options = {}) {\n    // 檢查 Electron\n    if (typeof window !== 'undefined' && window.electronAPI) {\n      const { ElectronAdapter } = require('./ElectronAdapter.js');\n      return new ElectronAdapter(options.savePath);\n    }\n    \n    // 檢查 Capacitor\n    if (typeof window !== 'undefined' && window.Capacitor) {\n      const { CapacitorAdapter } = require('./CapacitorAdapter.js');\n      return new CapacitorAdapter(options.directory);\n    }\n    \n    // 預設使用 IndexedDB（瀏覽器）\n    const { IndexedDBAdapter } = require('./IndexedDBAdapter.js');\n    return new IndexedDBAdapter(\n      options.dbName,\n      options.storeName,\n      options.version\n    );\n  }\n}\n\nexport default StorageFactory;\n","/**\n * PlatformDetector - 平台偵測工具\n * 自動偵測當前運行環境（Browser/Electron/Capacitor）\n */\n\nexport class PlatformDetector {\n  /**\n   * 偵測當前平台\n   * @returns {string} 'browser' | 'electron' | 'capacitor'\n   */\n  static detect() {\n    // 檢查是否為 Electron\n    if (typeof window !== 'undefined' && window.electronAPI) {\n      return 'electron';\n    }\n    \n    // 檢查是否為 Electron（另一種方式）\n    if (typeof process !== 'undefined' && process.versions && process.versions.electron) {\n      return 'electron';\n    }\n    \n    // 檢查是否為 Capacitor\n    if (typeof window !== 'undefined' && window.Capacitor) {\n      return 'capacitor';\n    }\n    \n    // 預設為瀏覽器\n    return 'browser';\n  }\n  \n  /**\n   * 檢查是否為 Electron 環境\n   * @returns {boolean}\n   */\n  static isElectron() {\n    return this.detect() === 'electron';\n  }\n  \n  /**\n   * 檢查是否為 Capacitor 環境\n   * @returns {boolean}\n   */\n  static isCapacitor() {\n    return this.detect() === 'capacitor';\n  }\n  \n  /**\n   * 檢查是否為瀏覽器環境\n   * @returns {boolean}\n   */\n  static isBrowser() {\n    return this.detect() === 'browser';\n  }\n  \n  /**\n   * 檢查是否為移動裝置\n   * @returns {boolean}\n   */\n  static isMobile() {\n    if (typeof window === 'undefined' || !window.navigator) {\n      return false;\n    }\n    \n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n      window.navigator.userAgent\n    );\n  }\n  \n  /**\n   * 檢查是否支援 AudioWorklet\n   * @returns {boolean}\n   */\n  static supportsAudioWorklet() {\n    if (typeof window === 'undefined' || !window.AudioContext) {\n      return false;\n    }\n    \n    const AudioContextClass = window.AudioContext || window.webkitAudioContext;\n    return 'audioWorklet' in AudioContextClass.prototype;\n  }\n  \n  /**\n   * 檢查是否支援 OffscreenCanvas\n   * @returns {boolean}\n   */\n  static supportsOffscreenCanvas() {\n    return typeof OffscreenCanvas !== 'undefined';\n  }\n  \n  /**\n   * 取得平台資訊\n   * @returns {Object}\n   */\n  static getInfo() {\n    return {\n      platform: this.detect(),\n      isElectron: this.isElectron(),\n      isCapacitor: this.isCapacitor(),\n      isBrowser: this.isBrowser(),\n      isMobile: this.isMobile(),\n      supportsAudioWorklet: this.supportsAudioWorklet(),\n      supportsOffscreenCanvas: this.supportsOffscreenCanvas(),\n      userAgent: typeof navigator !== 'undefined' ? navigator.userAgent : 'unknown'\n    };\n  }\n}\n\nexport default PlatformDetector;\n","/**\n * VoiceBank Recorder - 主入口點\n * 跨平台音訊錄音庫\n * \n * @version 1.0.0\n * @author VoiceBank Team\n * @license MIT\n */\n\n// 匯出核心模組\nexport { AudioEngine } from './core/AudioEngine.js';\n\n// 匯出儲存模組\nexport {\n  StorageAdapter,\n  IndexedDBAdapter,\n  ServerAdapter,\n  ElectronAdapter,\n  CapacitorAdapter,\n  StorageFactory\n} from './storage/index.js';\n\n// 匯出工具模組\nexport { PlatformDetector } from './utils/PlatformDetector.js';\n\n/**\n * VoiceBankRecorder - 主類別\n * 提供統一的 API 介面\n */\nexport class VoiceBankRecorder {\n  /**\n   * 建構函數\n   * @param {Object} options - 配置選項\n   * @param {string|HTMLElement} options.container - 容器選擇器或元素\n   * @param {string} options.layout - 佈局模式 ('horizontal'|'vertical'|'auto')\n   * @param {string} options.theme - 主題 ('light'|'dark')\n   * @param {Object} options.audio - 音訊配置\n   * @param {Object} options.waveform - 波形配置\n   * @param {Object} options.storage - 儲存配置\n   * @param {Object} options.callbacks - 事件回調\n   */\n  constructor(options = {}) {\n    this.options = this.mergeOptions(options);\n    this.initialized = false;\n    \n    // 初始化儲存適配器\n    this.storage = this.createStorageAdapter(this.options.storage);\n    \n    // 狀態\n    this.isRecording = false;\n    this.isPaused = false;\n    this.currentBlob = null;\n    \n    // 如果提供了容器，初始化 UI\n    if (this.options.container) {\n      this.initializeUI();\n    }\n  }\n  \n  /**\n   * 合併配置選項\n   * @param {Object} options - 用戶選項\n   * @returns {Object} 合併後的選項\n   */\n  mergeOptions(options) {\n    const defaults = {\n      container: null,\n      layout: 'auto',\n      theme: 'light',\n      \n      audio: {\n        sampleRate: 48000,\n        channels: 1,\n        agc: false,\n        gain: 1.0\n      },\n      \n      waveform: {\n        showOverview: true,\n        showAccumulated: true,\n        showLive: true,\n        decimation: 10,\n        colors: {\n          waveform: '#1E88E5',\n          selection: '#4CAF50',\n          playback: '#FF0000'\n        }\n      },\n      \n      storage: {\n        type: 'auto'\n      },\n      \n      callbacks: {\n        onRecordStart: () => {},\n        onRecordStop: () => {},\n        onRecordPause: () => {},\n        onRecordResume: () => {},\n        onPlayStart: () => {},\n        onPlayStop: () => {},\n        onError: (error) => console.error('VoiceBankRecorder error:', error)\n      }\n    };\n    \n    // 深度合併\n    return this.deepMerge(defaults, options);\n  }\n  \n  /**\n   * 深度合併物件\n   * @param {Object} target - 目標物件\n   * @param {Object} source - 來源物件\n   * @returns {Object}\n   */\n  deepMerge(target, source) {\n    const result = { ...target };\n    \n    for (const key in source) {\n      if (source[key] instanceof Object && !Array.isArray(source[key])) {\n        result[key] = this.deepMerge(result[key] || {}, source[key]);\n      } else {\n        result[key] = source[key];\n      }\n    }\n    \n    return result;\n  }\n  \n  /**\n   * 創建儲存適配器\n   * @param {Object} storageConfig - 儲存配置\n   * @returns {StorageAdapter}\n   */\n  createStorageAdapter(storageConfig) {\n    const { StorageFactory } = require('./storage/index.js');\n    return StorageFactory.create({\n      type: storageConfig.type || 'auto',\n      options: storageConfig\n    });\n  }\n  \n  /**\n   * 初始化 UI\n   */\n  initializeUI() {\n    // TODO: 實作 UI 初始化\n    // 這將在後續階段實作\n    console.log('UI initialization - to be implemented');\n  }\n  \n  /**\n   * 開始錄音\n   * @returns {Promise<void>}\n   */\n  async startRecording() {\n    try {\n      if (this.isRecording) {\n        throw new Error('Already recording');\n      }\n      \n      // TODO: 實作錄音邏輯\n      this.isRecording = true;\n      this.options.callbacks.onRecordStart();\n      \n      console.log('Recording started');\n    } catch (error) {\n      this.options.callbacks.onError(error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 停止錄音\n   * @returns {Promise<Blob>}\n   */\n  async stopRecording() {\n    try {\n      if (!this.isRecording) {\n        throw new Error('Not recording');\n      }\n      \n      // TODO: 實作停止錄音邏輯\n      this.isRecording = false;\n      \n      // 模擬返回 Blob（實際會從 AudioEngine 獲取）\n      this.currentBlob = null; // TODO: 實際的 Blob\n      \n      this.options.callbacks.onRecordStop(this.currentBlob);\n      \n      console.log('Recording stopped');\n      return this.currentBlob;\n    } catch (error) {\n      this.options.callbacks.onError(error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 暫停錄音\n   * @returns {Promise<void>}\n   */\n  async pauseRecording() {\n    try {\n      if (!this.isRecording || this.isPaused) {\n        throw new Error('Cannot pause');\n      }\n      \n      this.isPaused = true;\n      this.options.callbacks.onRecordPause();\n      \n      console.log('Recording paused');\n    } catch (error) {\n      this.options.callbacks.onError(error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 恢復錄音\n   * @returns {Promise<void>}\n   */\n  async resumeRecording() {\n    try {\n      if (!this.isRecording || !this.isPaused) {\n        throw new Error('Cannot resume');\n      }\n      \n      this.isPaused = false;\n      this.options.callbacks.onRecordResume();\n      \n      console.log('Recording resumed');\n    } catch (error) {\n      this.options.callbacks.onError(error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 播放錄音\n   * @returns {Promise<void>}\n   */\n  async play() {\n    try {\n      // TODO: 實作播放邏輯\n      this.options.callbacks.onPlayStart();\n      \n      console.log('Playback started');\n    } catch (error) {\n      this.options.callbacks.onError(error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 停止播放\n   * @returns {Promise<void>}\n   */\n  async stop() {\n    try {\n      // TODO: 實作停止播放邏輯\n      this.options.callbacks.onPlayStop();\n      \n      console.log('Playback stopped');\n    } catch (error) {\n      this.options.callbacks.onError(error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 儲存錄音\n   * @param {Blob} blob - 音訊 Blob（可選，使用當前錄音）\n   * @param {string} filename - 檔案名稱（可選，自動生成）\n   * @param {Object} metadata - 元數據（可選）\n   * @returns {Promise<string>} 檔案 ID\n   */\n  async saveRecording(blob = null, filename = null, metadata = {}) {\n    try {\n      const blobToSave = blob || this.currentBlob;\n      \n      if (!blobToSave) {\n        throw new Error('No recording to save');\n      }\n      \n      const filenameToUse = filename || `recording-${Date.now()}.wav`;\n      \n      const id = await this.storage.save(blobToSave, filenameToUse, metadata);\n      \n      console.log('Recording saved:', id);\n      return id;\n    } catch (error) {\n      this.options.callbacks.onError(error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 載入錄音\n   * @param {string} id - 檔案 ID\n   * @returns {Promise<Blob>}\n   */\n  async loadRecording(id) {\n    try {\n      const blob = await this.storage.load(id);\n      this.currentBlob = blob;\n      \n      console.log('Recording loaded:', id);\n      return blob;\n    } catch (error) {\n      this.options.callbacks.onError(error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 刪除錄音\n   * @param {string} id - 檔案 ID\n   * @returns {Promise<boolean>}\n   */\n  async deleteRecording(id) {\n    try {\n      const result = await this.storage.delete(id);\n      \n      console.log('Recording deleted:', id);\n      return result;\n    } catch (error) {\n      this.options.callbacks.onError(error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 列出所有錄音\n   * @returns {Promise<Array>}\n   */\n  async listRecordings() {\n    try {\n      const recordings = await this.storage.list();\n      \n      console.log('Recordings listed:', recordings.length);\n      return recordings;\n    } catch (error) {\n      this.options.callbacks.onError(error);\n      throw error;\n    }\n  }\n  \n  /**\n   * 取得當前錄音 Blob\n   * @returns {Blob|null}\n   */\n  getCurrentBlob() {\n    return this.currentBlob;\n  }\n  \n  /**\n   * 銷毀實例\n   */\n  destroy() {\n    // TODO: 清理資源\n    this.isRecording = false;\n    this.isPaused = false;\n    this.currentBlob = null;\n    \n    if (this.storage && typeof this.storage.close === 'function') {\n      this.storage.close();\n    }\n    \n    console.log('VoiceBankRecorder destroyed');\n  }\n}\n\n// 預設導出\nexport default VoiceBankRecorder;\n\n/**\n * 版本資訊\n */\nexport const VERSION = '1.0.0';\n\n/**\n * 建置資訊\n */\nexport const BUILD_INFO = {\n  version: VERSION,\n  date: new Date().toISOString(),\n  name: 'VoiceBank Recorder'\n};\n"],"names":["AudioEngine","constructor","options","config","sampleRate","autoGainControl","undefined","echoCancellation","noiseSuppression","micGain","deviceId","workletPath","preferWorklet","audioContext","analyser","preGainNode","mediaDest","analyserSilencer","workletSupported","workletLoaded","pcmCollectorNode","usingWorklet","pcmChunks","pcmTotalSamples","recorder","micStream","isRecording","isPaused","isInitialized","recordStartTime","recordStopTime","recordWallStartMs","recordWallStopMs","latestBlob","latestUrl","_eventListeners","initialize","AudioContextClass","window","AudioContext","webkitAudioContext","createAnalyser","fftSize","createGain","gain","value","createMediaStreamDestination","connect","destination","audioWorklet","AudioWorkletNode","addModule","_emit","path","error","console","warn","state","resume","stage","startRecording","Error","_captureMicrophone","URL","revokeObjectURL","Date","now","performance","useWorklet","_startWorkletRecording","_startRecordRTCRecording","timestamp","mode","stopRecording","blob","_stopWorkletRecording","_stopRecordRTCRecording","_stopMicrophone","createObjectURL","duration","url","samples","pauseRecording","resumeRecording","getLatestRecording","getPcmWindow","start","count","length","total","Float32Array","end","Math","min","out","offset","passed","i","chunk","cLen","cStart","cEnd","segStart","max","segEnd","localStart","slice","subarray","set","getAnalyser","getAudioContext","setMicGain","dispose","catch","close","on","event","handler","push","off","index","indexOf","splice","data","forEach","constraints","audio","video","exact","navigator","mediaDevices","getUserMedia","_applyIOSMicGainAdjustment","source","createMediaStreamSource","name","getTracks","track","stop","ua","userAgent","isIOS","test","abs","port","onmessage","type","pcmData","totalSamples","disconnect","merged","wavBuffer","_buildWavFromFloat32Mono","Blob","Promise","resolve","reject","RecordRTC","recordStream","stream","mimeType","recorderType","StereoAudioRecorder","numberOfAudioChannels","bufferSize","timeSlice","ondataavailable","getBlob","float32Data","numSamples","buffer","ArrayBuffer","view","DataView","_writeString","setUint32","setUint16","sample","int16","setInt16","string","setUint8","charCodeAt","StorageAdapter","save","filename","metadata","load","id","delete","list","exists","clear","files","file","IndexedDBAdapter","dbName","storeName","version","db","request","indexedDB","open","onerror","onsuccess","result","onupgradeneeded","target","objectStoreNames","contains","store","createObjectStore","keyPath","autoIncrement","createIndex","unique","transaction","objectStore","record","size","add","String","get","Number","getAll","records","map","date","searchByFilename","allRecords","filter","toLowerCase","includes","getStorageInfo","totalSize","reduce","sum","totalSizeMB","toFixed","countRequest","clearRequest","getStorageEstimate","storage","estimate","usage","quota","usageMB","quotaMB","usagePercent","ServerAdapter","baseURL","saveEndpoint","loadEndpoint","deleteEndpoint","listEndpoint","headers","formData","FormData","append","Object","keys","JSON","stringify","response","fetch","method","body","ok","status","statusText","text","json","Array","isArray","saveWithProgress","onProgress","xhr","XMLHttpRequest","upload","addEventListener","e","lengthComputable","percent","loaded","responseText","key","setRequestHeader","send","ElectronAdapter","savePath","electronAPI","arrayBuffer","from","Uint8Array","saveRecording","success","filePath","loadRecording","uint8Array","deleteRecording","directory","recordings","listRecordings","openFile","saveAs","defaultFilename","showInFolder","CapacitorAdapter","Capacitor","initialized","Filesystem","Directory","Plugins","readdir","Documents","mkdir","recursive","base64Data","blobToBase64","writeFile","metadataWithDefaults","encoding","readFile","base64ToBlob","deleteFile","audioFiles","f","endsWith","all","metaResult","parse","sort","a","b","getUri","uri","reader","FileReader","onloadend","base64","split","readAsDataURL","byteCharacters","atob","byteNumbers","byteArray","r","StorageFactory","create","createAuto","require","PlatformDetector","detect","process","versions","electron","isElectron","isCapacitor","isBrowser","isMobile","supportsAudioWorklet","prototype","supportsOffscreenCanvas","OffscreenCanvas","getInfo","platform","VoiceBankRecorder","mergeOptions","createStorageAdapter","currentBlob","container","initializeUI","defaults","layout","theme","channels","agc","waveform","showOverview","showAccumulated","showLive","decimation","colors","selection","playback","callbacks","onRecordStart","onRecordStop","onRecordPause","onRecordResume","onPlayStart","onPlayStop","onError","deepMerge","storageConfig","log","play","blobToSave","filenameToUse","getCurrentBlob","destroy","VERSION","BUILD_INFO","toISOString"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO,MAAMA,WAAW,CAAC;AACrB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACIC,EAAAA,WAAWA,CAACC,OAAO,GAAG,EAAE,EAAE;AACtB;IACA,IAAI,CAACC,MAAM,GAAG;AACVC,MAAAA,UAAU,EAAEF,OAAO,CAACE,UAAU,IAAI,KAAK;MACvCC,eAAe,EAAEH,OAAO,CAACG,eAAe,KAAKC,SAAS,GAAGJ,OAAO,CAACG,eAAe,GAAG,KAAK;MACxFE,gBAAgB,EAAEL,OAAO,CAACK,gBAAgB,KAAKD,SAAS,GAAGJ,OAAO,CAACK,gBAAgB,GAAG,KAAK;MAC3FC,gBAAgB,EAAEN,OAAO,CAACM,gBAAgB,KAAKF,SAAS,GAAGJ,OAAO,CAACM,gBAAgB,GAAG,KAAK;AAC3FC,MAAAA,OAAO,EAAEP,OAAO,CAACO,OAAO,IAAI,GAAG;AAC/BC,MAAAA,QAAQ,EAAER,OAAO,CAACQ,QAAQ,IAAI,IAAI;AAClCC,MAAAA,WAAW,EAAET,OAAO,CAACS,WAAW,IAAI,oCAAoC;MACxEC,aAAa,EAAEV,OAAO,CAACU,aAAa,KAAKN,SAAS,GAAGJ,OAAO,CAACU,aAAa,GAAG;KAChF;;AAED;IACA,IAAI,CAACC,YAAY,GAAG,IAAI;IACxB,IAAI,CAACC,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACC,WAAW,GAAG,IAAI;IACvB,IAAI,CAACC,SAAS,GAAG,IAAI;IACrB,IAAI,CAACC,gBAAgB,GAAG,IAAI;;AAE5B;IACA,IAAI,CAACC,gBAAgB,GAAG,KAAK;IAC7B,IAAI,CAACC,aAAa,GAAG,KAAK;IAC1B,IAAI,CAACC,gBAAgB,GAAG,IAAI;IAC5B,IAAI,CAACC,YAAY,GAAG,KAAK;;AAEzB;IACA,IAAI,CAACC,SAAS,GAAG,EAAE;IACnB,IAAI,CAACC,eAAe,GAAG,CAAC;;AAExB;IACA,IAAI,CAACC,QAAQ,GAAG,IAAI;;AAEpB;IACA,IAAI,CAACC,SAAS,GAAG,IAAI;;AAErB;IACA,IAAI,CAACC,WAAW,GAAG,KAAK;IACxB,IAAI,CAACC,QAAQ,GAAG,KAAK;IACrB,IAAI,CAACC,aAAa,GAAG,KAAK;;AAE1B;IACA,IAAI,CAACC,eAAe,GAAG,CAAC;IACxB,IAAI,CAACC,cAAc,GAAG,CAAC;IACvB,IAAI,CAACC,iBAAiB,GAAG,CAAC;IAC1B,IAAI,CAACC,gBAAgB,GAAG,CAAC;;AAEzB;IACA,IAAI,CAACC,UAAU,GAAG,IAAI;IACtB,IAAI,CAACC,SAAS,GAAG,IAAI;;AAErB;AACA,IAAA,IAAI,CAACC,eAAe,GAAG,EAAE;AAC7B,EAAA;;AAEA;AACJ;AACA;AACA;AACA;EACI,MAAMC,UAAUA,GAAG;IACf,IAAI,IAAI,CAACR,aAAa,EAAE;AACpB,MAAA;AACJ,IAAA;IAEA,IAAI;AACA;MACA,MAAMS,iBAAiB,GAAGC,MAAM,CAACC,YAAY,IAAID,MAAM,CAACE,kBAAkB;AAC1E,MAAA,IAAI,CAAC3B,YAAY,GAAG,IAAIwB,iBAAiB,CAAC;AAAEjC,QAAAA,UAAU,EAAE,IAAI,CAACD,MAAM,CAACC;AAAW,OAAC,CAAC;;AAEjF;MACA,IAAI,CAACU,QAAQ,GAAG,IAAI,CAACD,YAAY,CAAC4B,cAAc,EAAE;AAClD,MAAA,IAAI,CAAC3B,QAAQ,CAAC4B,OAAO,GAAG,GAAG;;AAE3B;MACA,IAAI,CAAC3B,WAAW,GAAG,IAAI,CAACF,YAAY,CAAC8B,UAAU,EAAE;MACjD,IAAI,CAAC5B,WAAW,CAAC6B,IAAI,CAACC,KAAK,GAAG,IAAI,CAAC1C,MAAM,CAACM,OAAO;;AAEjD;MACA,IAAI,CAACO,SAAS,GAAG,IAAI,CAACH,YAAY,CAACiC,4BAA4B,EAAE;;AAEjE;MACA,IAAI,CAAC/B,WAAW,CAACgC,OAAO,CAAC,IAAI,CAACjC,QAAQ,CAAC;MACvC,IAAI,CAACC,WAAW,CAACgC,OAAO,CAAC,IAAI,CAAC/B,SAAS,CAAC;;AAExC;MACA,IAAI,CAACC,gBAAgB,GAAG,IAAI,CAACJ,YAAY,CAAC8B,UAAU,EAAE;AACtD,MAAA,IAAI,CAAC1B,gBAAgB,CAAC2B,IAAI,CAACC,KAAK,GAAG,CAAC;MACpC,IAAI,CAAC/B,QAAQ,CAACiC,OAAO,CAAC,IAAI,CAAC9B,gBAAgB,CAAC;MAC5C,IAAI,CAACA,gBAAgB,CAAC8B,OAAO,CAAC,IAAI,CAAClC,YAAY,CAACmC,WAAW,CAAC;;AAE5D;AACA,MAAA,IAAI,CAAC9B,gBAAgB,GAAG,CAAC,EACrB,IAAI,CAACL,YAAY,CAACoC,YAAY,IAC9BX,MAAM,CAACY,gBAAgB,CAC1B;;AAED;MACA,IAAI,IAAI,CAAChC,gBAAgB,IAAI,IAAI,CAACf,MAAM,CAACS,aAAa,EAAE;QACpD,IAAI;AACA,UAAA,MAAM,IAAI,CAACC,YAAY,CAACoC,YAAY,CAACE,SAAS,CAAC,IAAI,CAAChD,MAAM,CAACQ,WAAW,CAAC;UACvE,IAAI,CAACQ,aAAa,GAAG,IAAI;AACzB,UAAA,IAAI,CAACiC,KAAK,CAAC,gBAAgB,EAAE;AAAEC,YAAAA,IAAI,EAAE,IAAI,CAAClD,MAAM,CAACQ;AAAY,WAAC,CAAC;QACnE,CAAC,CAAC,OAAO2C,KAAK,EAAE;AACZC,UAAAA,OAAO,CAACC,IAAI,CAAC,sCAAsC,EAAEF,KAAK,CAAC;UAC3D,IAAI,CAACnC,aAAa,GAAG,KAAK;AAC1B,UAAA,IAAI,CAACiC,KAAK,CAAC,qBAAqB,EAAE;AAAEE,YAAAA;AAAM,WAAC,CAAC;AAChD,QAAA;AACJ,MAAA;;AAEA;AACA,MAAA,IAAI,IAAI,CAACzC,YAAY,CAAC4C,KAAK,KAAK,WAAW,EAAE;AACzC,QAAA,MAAM,IAAI,CAAC5C,YAAY,CAAC6C,MAAM,EAAE;AACpC,MAAA;MAEA,IAAI,CAAC9B,aAAa,GAAG,IAAI;AACzB,MAAA,IAAI,CAACwB,KAAK,CAAC,aAAa,EAAE;AACtBhD,QAAAA,UAAU,EAAE,IAAI,CAACS,YAAY,CAACT,UAAU;AACxCqD,QAAAA,KAAK,EAAE,IAAI,CAAC5C,YAAY,CAAC4C,KAAK;QAC9BvC,gBAAgB,EAAE,IAAI,CAACA,gBAAgB;QACvCC,aAAa,EAAE,IAAI,CAACA;AACxB,OAAC,CAAC;IAEN,CAAC,CAAC,OAAOmC,KAAK,EAAE;AACZ,MAAA,IAAI,CAACF,KAAK,CAAC,OAAO,EAAE;AAAEO,QAAAA,KAAK,EAAE,YAAY;AAAEL,QAAAA;AAAM,OAAC,CAAC;AACnD,MAAA,MAAMA,KAAK;AACf,IAAA;AACJ,EAAA;;AAEA;AACJ;AACA;AACA;EACI,MAAMM,cAAcA,GAAG;AACnB,IAAA,IAAI,CAAC,IAAI,CAAChC,aAAa,EAAE;AACrB,MAAA,MAAM,IAAIiC,KAAK,CAAC,qCAAqC,CAAC;AAC1D,IAAA;IAEA,IAAI,IAAI,CAACnC,WAAW,EAAE;AAClB,MAAA,MAAM,IAAImC,KAAK,CAAC,QAAQ,CAAC;AAC7B,IAAA;IAEA,IAAI;AACA;AACA,MAAA,IAAI,IAAI,CAAChD,YAAY,CAAC4C,KAAK,KAAK,WAAW,EAAE;AACzC,QAAA,MAAM,IAAI,CAAC5C,YAAY,CAAC6C,MAAM,EAAE;AACpC,MAAA;;AAEA;AACA,MAAA,MAAM,IAAI,CAACI,kBAAkB,EAAE;;AAE/B;MACA,IAAI,CAACxC,SAAS,GAAG,EAAE;MACnB,IAAI,CAACC,eAAe,GAAG,CAAC;;AAExB;MACA,IAAI,IAAI,CAACW,SAAS,EAAE;AAChB6B,QAAAA,GAAG,CAACC,eAAe,CAAC,IAAI,CAAC9B,SAAS,CAAC;QACnC,IAAI,CAACA,SAAS,GAAG,IAAI;AACzB,MAAA;MACA,IAAI,CAACD,UAAU,GAAG,IAAI;;AAEtB;AACA,MAAA,IAAI,CAACJ,eAAe,GAAGoC,IAAI,CAACC,GAAG,EAAE;AACjC,MAAA,IAAI,CAACnC,iBAAiB,GAAGoC,WAAW,CAACD,GAAG,EAAE;MAC1C,IAAI,CAACpC,cAAc,GAAG,CAAC;MACvB,IAAI,CAACE,gBAAgB,GAAG,CAAC;;AAEzB;MACA,MAAMoC,UAAU,GAAG,IAAI,CAACjD,aAAa,IAAI,IAAI,CAAChB,MAAM,CAACS,aAAa;AAElE,MAAA,IAAIwD,UAAU,EAAE;AACZ,QAAA,MAAM,IAAI,CAACC,sBAAsB,EAAE;AACvC,MAAA,CAAC,MAAM;AACH,QAAA,MAAM,IAAI,CAACC,wBAAwB,EAAE;AACzC,MAAA;MAEA,IAAI,CAAC5C,WAAW,GAAG,IAAI;MACvB,IAAI,CAACC,QAAQ,GAAG,KAAK;AAErB,MAAA,IAAI,CAACyB,KAAK,CAAC,iBAAiB,EAAE;QAC1BmB,SAAS,EAAE,IAAI,CAAC1C,eAAe;AAC/B2C,QAAAA,IAAI,EAAEJ,UAAU,GAAG,SAAS,GAAG,WAAW;AAC1ChE,QAAAA,UAAU,EAAE,IAAI,CAACS,YAAY,CAACT;AAClC,OAAC,CAAC;IAEN,CAAC,CAAC,OAAOkD,KAAK,EAAE;AACZ,MAAA,IAAI,CAACF,KAAK,CAAC,OAAO,EAAE;AAAEO,QAAAA,KAAK,EAAE,iBAAiB;AAAEL,QAAAA;AAAM,OAAC,CAAC;AACxD,MAAA,MAAMA,KAAK;AACf,IAAA;AACJ,EAAA;;AAEA;AACJ;AACA;AACA;EACI,MAAMmB,aAAaA,GAAG;AAClB,IAAA,IAAI,CAAC,IAAI,CAAC/C,WAAW,EAAE;AACnB,MAAA,MAAM,IAAImC,KAAK,CAAC,SAAS,CAAC;AAC9B,IAAA;IAEA,IAAI;MACA,IAAI,CAACnC,WAAW,GAAG,KAAK;AACxB,MAAA,IAAI,CAACI,cAAc,GAAGmC,IAAI,CAACC,GAAG,EAAE;AAChC,MAAA,IAAI,CAAClC,gBAAgB,GAAGmC,WAAW,CAACD,GAAG,EAAE;AAEzC,MAAA,IAAIQ,IAAI;MAER,IAAI,IAAI,CAACrD,YAAY,EAAE;AACnBqD,QAAAA,IAAI,GAAG,MAAM,IAAI,CAACC,qBAAqB,EAAE;AAC7C,MAAA,CAAC,MAAM,IAAI,IAAI,CAACnD,QAAQ,EAAE;AACtBkD,QAAAA,IAAI,GAAG,MAAM,IAAI,CAACE,uBAAuB,EAAE;AAC/C,MAAA,CAAC,MAAM;AACH,QAAA,MAAM,IAAIf,KAAK,CAAC,UAAU,CAAC;AAC/B,MAAA;;AAEA;MACA,IAAI,CAACgB,eAAe,EAAE;;AAEtB;MACA,IAAI,CAAC5C,UAAU,GAAGyC,IAAI;MACtB,IAAI,CAACxC,SAAS,GAAG6B,GAAG,CAACe,eAAe,CAACJ,IAAI,CAAC;MAE1C,MAAMK,QAAQ,GAAG,CAAC,IAAI,CAACjD,cAAc,GAAG,IAAI,CAACD,eAAe,IAAI,IAAI;AAEpE,MAAA,IAAI,CAACuB,KAAK,CAAC,gBAAgB,EAAE;QACzBsB,IAAI;QACJM,GAAG,EAAE,IAAI,CAAC9C,SAAS;QACnB6C,QAAQ;QACRE,OAAO,EAAE,IAAI,CAAC1D,eAAe;AAC7BnB,QAAAA,UAAU,EAAE,IAAI,CAACS,YAAY,CAACT;AAClC,OAAC,CAAC;AAEF,MAAA,OAAOsE,IAAI;IAEf,CAAC,CAAC,OAAOpB,KAAK,EAAE;AACZ,MAAA,IAAI,CAACF,KAAK,CAAC,OAAO,EAAE;AAAEO,QAAAA,KAAK,EAAE,gBAAgB;AAAEL,QAAAA;AAAM,OAAC,CAAC;AACvD,MAAA,MAAMA,KAAK;AACf,IAAA;AACJ,EAAA;;AAEA;AACJ;AACA;AACI4B,EAAAA,cAAcA,GAAG;AACb,IAAA,IAAI,CAAC,IAAI,CAACxD,WAAW,EAAE;AACnB,MAAA,MAAM,IAAImC,KAAK,CAAC,SAAS,CAAC;AAC9B,IAAA;IAEA,IAAI,IAAI,CAACxC,YAAY,EAAE;AACnB,MAAA,MAAM,IAAIwC,KAAK,CAAC,wBAAwB,CAAC;AAC7C,IAAA;AAEA,IAAA,IAAI,IAAI,CAACrC,QAAQ,IAAI,OAAO,IAAI,CAACA,QAAQ,CAAC0D,cAAc,KAAK,UAAU,EAAE;AACrE,MAAA,IAAI,CAAC1D,QAAQ,CAAC0D,cAAc,EAAE;MAC9B,IAAI,CAACvD,QAAQ,GAAG,IAAI;AACpB,MAAA,IAAI,CAACyB,KAAK,CAAC,kBAAkB,EAAE;AAAEmB,QAAAA,SAAS,EAAEN,IAAI,CAACC,GAAG;AAAG,OAAC,CAAC;AAC7D,IAAA,CAAC,MAAM;AACH,MAAA,MAAM,IAAIL,KAAK,CAAC,SAAS,CAAC;AAC9B,IAAA;AACJ,EAAA;;AAEA;AACJ;AACA;AACIsB,EAAAA,eAAeA,GAAG;AACd,IAAA,IAAI,CAAC,IAAI,CAACxD,QAAQ,EAAE;AAChB,MAAA,MAAM,IAAIkC,KAAK,CAAC,QAAQ,CAAC;AAC7B,IAAA;AAEA,IAAA,IAAI,IAAI,CAACrC,QAAQ,IAAI,OAAO,IAAI,CAACA,QAAQ,CAAC2D,eAAe,KAAK,UAAU,EAAE;AACtE,MAAA,IAAI,CAAC3D,QAAQ,CAAC2D,eAAe,EAAE;MAC/B,IAAI,CAACxD,QAAQ,GAAG,KAAK;AACrB,MAAA,IAAI,CAACyB,KAAK,CAAC,mBAAmB,EAAE;AAAEmB,QAAAA,SAAS,EAAEN,IAAI,CAACC,GAAG;AAAG,OAAC,CAAC;AAC9D,IAAA,CAAC,MAAM;AACH,MAAA,MAAM,IAAIL,KAAK,CAAC,WAAW,CAAC;AAChC,IAAA;AACJ,EAAA;;AAEA;AACJ;AACA;AACA;AACIuB,EAAAA,kBAAkBA,GAAG;IACjB,OAAO;MACHV,IAAI,EAAE,IAAI,CAACzC,UAAU;MACrB+C,GAAG,EAAE,IAAI,CAAC9C,SAAS;AACnB6C,MAAAA,QAAQ,EAAE,IAAI,CAAC9C,UAAU,GAAG,CAAC,IAAI,CAACH,cAAc,GAAG,IAAI,CAACD,eAAe,IAAI,IAAI,GAAG,CAAC;MACnFoD,OAAO,EAAE,IAAI,CAAC1D,eAAe;MAC7BnB,UAAU,EAAE,IAAI,CAACS,YAAY,GAAG,IAAI,CAACA,YAAY,CAACT,UAAU,GAAG;KAClE;AACL,EAAA;;AAEA;AACJ;AACA;AACA;AACA;AACA;AACIiF,EAAAA,YAAYA,CAACC,KAAK,EAAEC,KAAK,EAAE;IACvB,IAAI,CAAC,IAAI,CAAClE,YAAY,IAAI,CAAC,IAAI,CAACC,SAAS,CAACkE,MAAM,EAAE;AAC9C,MAAA,OAAO,IAAI;AACf,IAAA;AAEA,IAAA,IAAIF,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAG,CAAC;AACxB,IAAA,MAAMG,KAAK,GAAG,IAAI,CAAClE,eAAe;IAClC,IAAI+D,KAAK,IAAIG,KAAK,EAAE,OAAO,IAAIC,YAAY,CAAC,CAAC,CAAC;IAE9C,MAAMC,GAAG,GAAGC,IAAI,CAACC,GAAG,CAACJ,KAAK,EAAEH,KAAK,GAAGC,KAAK,CAAC;IAC1C,MAAMO,GAAG,GAAG,IAAIJ,YAAY,CAACC,GAAG,GAAGL,KAAK,CAAC;IACzC,IAAIS,MAAM,GAAG,CAAC;IACd,IAAIC,MAAM,GAAG,CAAC;AAEd,IAAA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAAC3E,SAAS,CAACkE,MAAM,IAAIQ,MAAM,GAAGL,GAAG,EAAEM,CAAC,EAAE,EAAE;AAC5D,MAAA,MAAMC,KAAK,GAAG,IAAI,CAAC5E,SAAS,CAAC2E,CAAC,CAAC;AAC/B,MAAA,IAAI,CAACC,KAAK,IAAI,CAACA,KAAK,CAACV,MAAM,EAAE;AAE7B,MAAA,MAAMW,IAAI,GAAGD,KAAK,CAACV,MAAM;MACzB,MAAMY,MAAM,GAAGJ,MAAM;AACrB,MAAA,MAAMK,IAAI,GAAGL,MAAM,GAAGG,IAAI;MAE1B,IAAIE,IAAI,IAAIf,KAAK,EAAE;AACfU,QAAAA,MAAM,GAAGK,IAAI;AACb,QAAA;AACJ,MAAA;MAEA,MAAMC,QAAQ,GAAGV,IAAI,CAACW,GAAG,CAACjB,KAAK,EAAEc,MAAM,CAAC;MACxC,MAAMI,MAAM,GAAGZ,IAAI,CAACC,GAAG,CAACF,GAAG,EAAEU,IAAI,CAAC;MAElC,IAAIG,MAAM,GAAGF,QAAQ,EAAE;AACnB,QAAA,MAAMG,UAAU,GAAGH,QAAQ,GAAGF,MAAM;AACpC,QAAA,MAAMM,KAAK,GAAGR,KAAK,CAACS,QAAQ,CAACF,UAAU,EAAEA,UAAU,IAAID,MAAM,GAAGF,QAAQ,CAAC,CAAC;AAC1ER,QAAAA,GAAG,CAACc,GAAG,CAACF,KAAK,EAAEX,MAAM,CAAC;QACtBA,MAAM,IAAIW,KAAK,CAAClB,MAAM;AAC1B,MAAA;AAEAQ,MAAAA,MAAM,GAAGK,IAAI;MACb,IAAIG,MAAM,IAAIb,GAAG,EAAE;AACvB,IAAA;AAEA,IAAA,OAAOG,GAAG;AACd,EAAA;;AAEA;AACJ;AACA;AACA;AACIe,EAAAA,WAAWA,GAAG;IACV,OAAO,IAAI,CAAC/F,QAAQ;AACxB,EAAA;;AAEA;AACJ;AACA;AACA;AACIgG,EAAAA,eAAeA,GAAG;IACd,OAAO,IAAI,CAACjG,YAAY;AAC5B,EAAA;;AAEA;AACJ;AACA;AACA;EACIkG,UAAUA,CAACnE,IAAI,EAAE;AACbA,IAAAA,IAAI,GAAGgD,IAAI,CAACW,GAAG,CAAC,GAAG,EAAEX,IAAI,CAACC,GAAG,CAAC,GAAG,EAAEjD,IAAI,CAAC,CAAC;AACzC,IAAA,IAAI,CAACzC,MAAM,CAACM,OAAO,GAAGmC,IAAI;IAE1B,IAAI,IAAI,CAAC7B,WAAW,EAAE;AAClB,MAAA,IAAI,CAACA,WAAW,CAAC6B,IAAI,CAACC,KAAK,GAAGD,IAAI;AACtC,IAAA;AAEA,IAAA,IAAI,CAACQ,KAAK,CAAC,kBAAkB,EAAE;AAAER,MAAAA;AAAK,KAAC,CAAC;AAC5C,EAAA;;AAEA;AACJ;AACA;AACIoE,EAAAA,OAAOA,GAAG;IACN,IAAI,IAAI,CAACtF,WAAW,EAAE;MAClB,IAAI,CAAC+C,aAAa,EAAE,CAACwC,KAAK,CAAC1D,OAAO,CAACD,KAAK,CAAC;AAC7C,IAAA;IAEA,IAAI,CAACuB,eAAe,EAAE;IAEtB,IAAI,IAAI,CAAC3C,SAAS,EAAE;AAChB6B,MAAAA,GAAG,CAACC,eAAe,CAAC,IAAI,CAAC9B,SAAS,CAAC;MACnC,IAAI,CAACA,SAAS,GAAG,IAAI;AACzB,IAAA;IAEA,IAAI,IAAI,CAACrB,YAAY,EAAE;AACnB,MAAA,IAAI,CAACA,YAAY,CAACqG,KAAK,EAAE,CAACD,KAAK,CAAC1D,OAAO,CAACD,KAAK,CAAC;MAC9C,IAAI,CAACzC,YAAY,GAAG,IAAI;AAC5B,IAAA;IAEA,IAAI,CAACC,QAAQ,GAAG,IAAI;IACpB,IAAI,CAACC,WAAW,GAAG,IAAI;IACvB,IAAI,CAACC,SAAS,GAAG,IAAI;IACrB,IAAI,CAACC,gBAAgB,GAAG,IAAI;IAC5B,IAAI,CAACG,gBAAgB,GAAG,IAAI;IAC5B,IAAI,CAACI,QAAQ,GAAG,IAAI;IAEpB,IAAI,CAACF,SAAS,GAAG,EAAE;IACnB,IAAI,CAACC,eAAe,GAAG,CAAC;IAExB,IAAI,CAACK,aAAa,GAAG,KAAK;AAE1B,IAAA,IAAI,CAACwB,KAAK,CAAC,UAAU,CAAC;AAC1B,EAAA;;AAEA;AACA;AACA;;AAEA;AACJ;AACA;AACA;AACA;AACI+D,EAAAA,EAAEA,CAACC,KAAK,EAAEC,OAAO,EAAE;AACf,IAAA,IAAI,CAAC,IAAI,CAAClF,eAAe,CAACiF,KAAK,CAAC,EAAE;AAC9B,MAAA,IAAI,CAACjF,eAAe,CAACiF,KAAK,CAAC,GAAG,EAAE;AACpC,IAAA;IACA,IAAI,CAACjF,eAAe,CAACiF,KAAK,CAAC,CAACE,IAAI,CAACD,OAAO,CAAC;AAC7C,EAAA;;AAEA;AACJ;AACA;AACA;AACA;AACIE,EAAAA,GAAGA,CAACH,KAAK,EAAEC,OAAO,EAAE;AAChB,IAAA,IAAI,CAAC,IAAI,CAAClF,eAAe,CAACiF,KAAK,CAAC,EAAE;AAElC,IAAA,MAAMI,KAAK,GAAG,IAAI,CAACrF,eAAe,CAACiF,KAAK,CAAC,CAACK,OAAO,CAACJ,OAAO,CAAC;AAC1D,IAAA,IAAIG,KAAK,GAAG,EAAE,EAAE;MACZ,IAAI,CAACrF,eAAe,CAACiF,KAAK,CAAC,CAACM,MAAM,CAACF,KAAK,EAAE,CAAC,CAAC;AAChD,IAAA;AACJ,EAAA;;AAEA;AACJ;AACA;AACA;AACIpE,EAAAA,KAAKA,CAACgE,KAAK,EAAEO,IAAI,EAAE;AACf,IAAA,IAAI,CAAC,IAAI,CAACxF,eAAe,CAACiF,KAAK,CAAC,EAAE;IAElC,IAAI,CAACjF,eAAe,CAACiF,KAAK,CAAC,CAACQ,OAAO,CAACP,OAAO,IAAI;MAC3C,IAAI;QACAA,OAAO,CAACM,IAAI,CAAC;MACjB,CAAC,CAAC,OAAOrE,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAAC,CAAA,SAAA,EAAY8D,KAAK,CAAA,EAAA,CAAI,EAAE9D,KAAK,CAAC;AAC/C,MAAA;AACJ,IAAA,CAAC,CAAC;AACN,EAAA;;AAEA;AACA;AACA;;EAEA,MAAMQ,kBAAkBA,GAAG;AACvB,IAAA,MAAM+D,WAAW,GAAG;AAChBC,MAAAA,KAAK,EAAE;AACHvH,QAAAA,gBAAgB,EAAE,IAAI,CAACJ,MAAM,CAACI,gBAAgB;AAC9CC,QAAAA,gBAAgB,EAAE,IAAI,CAACL,MAAM,CAACK,gBAAgB;AAC9CH,QAAAA,eAAe,EAAE,IAAI,CAACF,MAAM,CAACE;OAChC;AACD0H,MAAAA,KAAK,EAAE;KACV;;AAED;AACA,IAAA,IAAI,IAAI,CAAC5H,MAAM,CAACO,QAAQ,EAAE;AACtBmH,MAAAA,WAAW,CAACC,KAAK,CAACpH,QAAQ,GAAG;AAAEsH,QAAAA,KAAK,EAAE,IAAI,CAAC7H,MAAM,CAACO;OAAU;AAChE,IAAA;IAEA,IAAI;MACA,IAAI,CAACe,SAAS,GAAG,MAAMwG,SAAS,CAACC,YAAY,CAACC,YAAY,CAACN,WAAW,CAAC;;AAEvE;MACA,IAAI,CAACO,0BAA0B,EAAE;;AAEjC;MACA,MAAMC,MAAM,GAAG,IAAI,CAACxH,YAAY,CAACyH,uBAAuB,CAAC,IAAI,CAAC7G,SAAS,CAAC;AACxE4G,MAAAA,MAAM,CAACtF,OAAO,CAAC,IAAI,CAAChC,WAAW,CAAC;AAEhC,MAAA,IAAI,CAACqC,KAAK,CAAC,qBAAqB,EAAE;AAC9B1C,QAAAA,QAAQ,EAAE,IAAI,CAACP,MAAM,CAACO,QAAQ;AAC9BmH,QAAAA;AACJ,OAAC,CAAC;IAEN,CAAC,CAAC,OAAOvE,KAAK,EAAE;AACZ;MACA,IAAIA,KAAK,CAACiF,IAAI,KAAK,sBAAsB,IAAIjF,KAAK,CAACiF,IAAI,KAAK,eAAe,EAAE;AACzEhF,QAAAA,OAAO,CAACC,IAAI,CAAC,mBAAmB,CAAC;AAEjC,QAAA,OAAOqE,WAAW,CAACC,KAAK,CAACpH,QAAQ;QACjC,IAAI,CAACe,SAAS,GAAG,MAAMwG,SAAS,CAACC,YAAY,CAACC,YAAY,CAACN,WAAW,CAAC;QAEvE,IAAI,CAACO,0BAA0B,EAAE;QAEjC,MAAMC,MAAM,GAAG,IAAI,CAACxH,YAAY,CAACyH,uBAAuB,CAAC,IAAI,CAAC7G,SAAS,CAAC;AACxE4G,QAAAA,MAAM,CAACtF,OAAO,CAAC,IAAI,CAAChC,WAAW,CAAC;AAEhC,QAAA,IAAI,CAACqC,KAAK,CAAC,8BAA8B,EAAE;AAAEyE,UAAAA;AAAY,SAAC,CAAC;AAC/D,MAAA,CAAC,MAAM;AACH,QAAA,MAAMvE,KAAK;AACf,MAAA;AACJ,IAAA;AACJ,EAAA;AAEAuB,EAAAA,eAAeA,GAAG;IACd,IAAI,IAAI,CAACpD,SAAS,EAAE;MAChB,IAAI,CAACA,SAAS,CAAC+G,SAAS,EAAE,CAACZ,OAAO,CAACa,KAAK,IAAI;QACxC,IAAI;UACAA,KAAK,CAACC,IAAI,EAAE;QAChB,CAAC,CAAC,OAAOpF,KAAK,EAAE;AACZC,UAAAA,OAAO,CAACC,IAAI,CAAC,YAAY,EAAEF,KAAK,CAAC;AACrC,QAAA;AACJ,MAAA,CAAC,CAAC;MACF,IAAI,CAAC7B,SAAS,GAAG,IAAI;AACzB,IAAA;AACJ,EAAA;AAEA2G,EAAAA,0BAA0BA,GAAG;AACzB;IACA,IAAI;AACA,MAAA,MAAMO,EAAE,GAAGV,SAAS,CAACW,SAAS,IAAI,EAAE;AACpC,MAAA,MAAMC,KAAK,GAAG,mBAAmB,CAACC,IAAI,CAACH,EAAE,CAAC;MAE1C,IAAIE,KAAK,IAAI,CAAC,IAAI,CAAC1I,MAAM,CAACE,eAAe,EAAE;AACvC,QAAA,IAAIuF,IAAI,CAACmD,GAAG,CAAC,IAAI,CAAC5I,MAAM,CAACM,OAAO,GAAG,GAAG,CAAC,GAAG,MAAM,EAAE;AAC9C,UAAA,IAAI,CAACsG,UAAU,CAAC,GAAG,CAAC;AACpB,UAAA,IAAI,CAAC3D,KAAK,CAAC,mBAAmB,EAAE;AAAER,YAAAA,IAAI,EAAE;AAAI,WAAC,CAAC;AAClD,QAAA;AACJ,MAAA;IACJ,CAAC,CAAC,OAAOU,KAAK,EAAE;AACZC,MAAAA,OAAO,CAACC,IAAI,CAAC,aAAa,EAAEF,KAAK,CAAC;AACtC,IAAA;AACJ,EAAA;;AAEA;AACA;AACA;;EAEA,MAAMe,sBAAsBA,GAAG;IAC3B,IAAI;AACA;MACA,IAAI,CAACjD,gBAAgB,GAAG,IAAI8B,gBAAgB,CACxC,IAAI,CAACrC,YAAY,EACjB,yBACJ,CAAC;;AAED;MACA,IAAI,CAACO,gBAAgB,CAAC4H,IAAI,CAACC,SAAS,GAAI7B,KAAK,IAAK;QAC9C,MAAM;UAAE8B,IAAI;AAAEC,UAAAA;SAAS,GAAG/B,KAAK,CAACO,IAAI;AAEpC,QAAA,IAAIuB,IAAI,KAAK,UAAU,IAAIC,OAAO,EAAE;UAChC,IAAI,CAAC7H,SAAS,CAACgG,IAAI,CAAC,IAAI5B,YAAY,CAACyD,OAAO,CAAC,CAAC;AAC9C,UAAA,IAAI,CAAC5H,eAAe,IAAI4H,OAAO,CAAC3D,MAAM;AAEtC,UAAA,IAAI,CAACpC,KAAK,CAAC,gBAAgB,EAAE;AACzB+F,YAAAA,OAAO,EAAE,IAAIzD,YAAY,CAACyD,OAAO,CAAC;YAClCC,YAAY,EAAE,IAAI,CAAC7H,eAAe;AAClCiD,YAAAA,IAAI,EAAE;AACV,WAAC,CAAC;AACN,QAAA;MACJ,CAAC;;AAED;MACA,IAAI,CAACzD,WAAW,CAACgC,OAAO,CAAC,IAAI,CAAC3B,gBAAgB,CAAC;MAC/C,IAAI,CAACA,gBAAgB,CAAC2B,OAAO,CAAC,IAAI,CAAClC,YAAY,CAACmC,WAAW,CAAC;MAE5D,IAAI,CAAC3B,YAAY,GAAG,IAAI;IAE5B,CAAC,CAAC,OAAOiC,KAAK,EAAE;AACZC,MAAAA,OAAO,CAACD,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAAC;MACxD,IAAI,CAACjC,YAAY,GAAG,KAAK;AACzB,MAAA,MAAM,IAAI,CAACiD,wBAAwB,EAAE;AACzC,IAAA;AACJ,EAAA;EAEA,MAAMK,qBAAqBA,GAAG;IAC1B,IAAI;AACA;MACA,IAAI,IAAI,CAACvD,gBAAgB,EAAE;AACvB,QAAA,IAAI,CAACA,gBAAgB,CAAC4H,IAAI,CAACC,SAAS,GAAG,IAAI;QAC3C,IAAI,CAAClI,WAAW,CAACsI,UAAU,CAAC,IAAI,CAACjI,gBAAgB,CAAC;AAClD,QAAA,IAAI,CAACA,gBAAgB,CAACiI,UAAU,EAAE;QAClC,IAAI,CAACjI,gBAAgB,GAAG,IAAI;AAChC,MAAA;;AAEA;AACA,MAAA,IAAI,IAAI,CAACE,SAAS,CAACkE,MAAM,KAAK,CAAC,EAAE;AAC7B,QAAA,MAAM,IAAI3B,KAAK,CAAC,QAAQ,CAAC;AAC7B,MAAA;MAEA,MAAMyF,MAAM,GAAG,IAAI5D,YAAY,CAAC,IAAI,CAACnE,eAAe,CAAC;MACrD,IAAIwE,MAAM,GAAG,CAAC;AAEd,MAAA,KAAK,MAAMG,KAAK,IAAI,IAAI,CAAC5E,SAAS,EAAE;AAChCgI,QAAAA,MAAM,CAAC1C,GAAG,CAACV,KAAK,EAAEH,MAAM,CAAC;QACzBA,MAAM,IAAIG,KAAK,CAACV,MAAM;AAC1B,MAAA;;AAEA;AACA,MAAA,MAAM+D,SAAS,GAAG,IAAI,CAACC,wBAAwB,CAC3CF,MAAM,EACN,IAAI,CAACzI,YAAY,CAACT,UACtB,CAAC;MAED,MAAMsE,IAAI,GAAG,IAAI+E,IAAI,CAAC,CAACF,SAAS,CAAC,EAAE;AAAEL,QAAAA,IAAI,EAAE;AAAY,OAAC,CAAC;MAEzD,IAAI,CAAC7H,YAAY,GAAG,KAAK;AAEzB,MAAA,OAAOqD,IAAI;IAEf,CAAC,CAAC,OAAOpB,KAAK,EAAE;AACZC,MAAAA,OAAO,CAACD,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAAC;AAC1C,MAAA,MAAMA,KAAK;AACf,IAAA;AACJ,EAAA;;AAEA;AACA;AACA;;EAEA,MAAMgB,wBAAwBA,GAAG;AAC7B,IAAA,OAAO,IAAIoF,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACpC,IAAI;AACA;AACA,QAAA,IAAI,OAAOC,SAAS,KAAK,WAAW,EAAE;AAClCD,UAAAA,MAAM,CAAC,IAAI/F,KAAK,CAAC,eAAe,CAAC,CAAC;AAClC,UAAA;AACJ,QAAA;QAEA,MAAMiG,YAAY,GAAG,IAAI,CAAC9I,SAAS,CAAC+I,MAAM,IAAI,IAAI,CAACtI,SAAS;AAE5D,QAAA,IAAI,CAACD,QAAQ,GAAGqI,SAAS,CAACC,YAAY,EAAE;AACpCZ,UAAAA,IAAI,EAAE,OAAO;AACbc,UAAAA,QAAQ,EAAE,WAAW;AACrBC,UAAAA,YAAY,EAAEC,mBAAmB;AACjCC,UAAAA,qBAAqB,EAAE,CAAC;AACxBC,UAAAA,UAAU,EAAE,IAAI;AAChBC,UAAAA,SAAS,EAAE,GAAG;UACdC,eAAe,EAAG5F,IAAI,IAAK;AACvB,YAAA,IAAI,CAACtB,KAAK,CAAC,gBAAgB,EAAE;cACzBsB,IAAI;AACJF,cAAAA,IAAI,EAAE;AACV,aAAC,CAAC;AACN,UAAA;AACJ,SAAC,CAAC;AAEF,QAAA,IAAI,CAAChD,QAAQ,CAACoC,cAAc,EAAE;QAC9B,IAAI,CAACvC,YAAY,GAAG,KAAK;AAEzBsI,QAAAA,OAAO,EAAE;MAEb,CAAC,CAAC,OAAOrG,KAAK,EAAE;QACZsG,MAAM,CAACtG,KAAK,CAAC;AACjB,MAAA;AACJ,IAAA,CAAC,CAAC;AACN,EAAA;EAEA,MAAMsB,uBAAuBA,GAAG;AAC5B,IAAA,OAAO,IAAI8E,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACpC,IAAI;AACA,QAAA,IAAI,CAAC,IAAI,CAACpI,QAAQ,EAAE;AAChBoI,UAAAA,MAAM,CAAC,IAAI/F,KAAK,CAAC,kBAAkB,CAAC,CAAC;AACrC,UAAA;AACJ,QAAA;AAEA,QAAA,IAAI,CAACrC,QAAQ,CAACiD,aAAa,CAAC,MAAM;UAC9B,IAAI;YACA,MAAMC,IAAI,GAAG,IAAI,CAAClD,QAAQ,CAAC+I,OAAO,EAAE;;AAEpC;YACA,IAAI,CAAC/I,QAAQ,GAAG,IAAI;YAEpBmI,OAAO,CAACjF,IAAI,CAAC;UACjB,CAAC,CAAC,OAAOpB,KAAK,EAAE;YACZsG,MAAM,CAACtG,KAAK,CAAC;AACjB,UAAA;AACJ,QAAA,CAAC,CAAC;MAEN,CAAC,CAAC,OAAOA,KAAK,EAAE;QACZsG,MAAM,CAACtG,KAAK,CAAC;AACjB,MAAA;AACJ,IAAA,CAAC,CAAC;AACN,EAAA;;AAEA;AACA;AACA;;AAEAkG,EAAAA,wBAAwBA,CAACgB,WAAW,EAAEpK,UAAU,EAAE;AAC9C,IAAA,MAAMqK,UAAU,GAAGD,WAAW,CAAChF,MAAM;IACrC,MAAMkF,MAAM,GAAG,IAAIC,WAAW,CAAC,EAAE,GAAGF,UAAU,GAAG,CAAC,CAAC;AACnD,IAAA,MAAMG,IAAI,GAAG,IAAIC,QAAQ,CAACH,MAAM,CAAC;;AAEjC;IACA,IAAI,CAACI,YAAY,CAACF,IAAI,EAAE,CAAC,EAAE,MAAM,CAAC;AAClCA,IAAAA,IAAI,CAACG,SAAS,CAAC,CAAC,EAAE,EAAE,GAAGN,UAAU,GAAG,CAAC,EAAE,IAAI,CAAC;IAC5C,IAAI,CAACK,YAAY,CAACF,IAAI,EAAE,CAAC,EAAE,MAAM,CAAC;IAClC,IAAI,CAACE,YAAY,CAACF,IAAI,EAAE,EAAE,EAAE,MAAM,CAAC;IACnCA,IAAI,CAACG,SAAS,CAAC,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;IAC7BH,IAAI,CAACI,SAAS,CAAC,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;IAC5BJ,IAAI,CAACI,SAAS,CAAC,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;IAC5BJ,IAAI,CAACG,SAAS,CAAC,EAAE,EAAE3K,UAAU,EAAE,IAAI,CAAC;AACpCwK,IAAAA,IAAI,CAACG,SAAS,CAAC,EAAE,EAAE3K,UAAU,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC;IACzCwK,IAAI,CAACI,SAAS,CAAC,EAAE,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;IAC5BJ,IAAI,CAACI,SAAS,CAAC,EAAE,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;IAC7B,IAAI,CAACF,YAAY,CAACF,IAAI,EAAE,EAAE,EAAE,MAAM,CAAC;IACnCA,IAAI,CAACG,SAAS,CAAC,EAAE,EAAEN,UAAU,GAAG,CAAC,EAAE,IAAI,CAAC;;AAExC;IACA,IAAI1E,MAAM,GAAG,EAAE;IACf,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGwE,UAAU,EAAExE,CAAC,EAAE,EAAE;MACjC,MAAMgF,MAAM,GAAGrF,IAAI,CAACW,GAAG,CAAC,EAAE,EAAEX,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE2E,WAAW,CAACvE,CAAC,CAAC,CAAC,CAAC;AACxD,MAAA,MAAMiF,KAAK,GAAGD,MAAM,GAAG,CAAC,GAAGA,MAAM,GAAG,MAAM,GAAGA,MAAM,GAAG,MAAM;MAC5DL,IAAI,CAACO,QAAQ,CAACpF,MAAM,EAAEmF,KAAK,EAAE,IAAI,CAAC;AAClCnF,MAAAA,MAAM,IAAI,CAAC;AACf,IAAA;AAEA,IAAA,OAAO2E,MAAM;AACjB,EAAA;AAEAI,EAAAA,YAAYA,CAACF,IAAI,EAAE7E,MAAM,EAAEqF,MAAM,EAAE;AAC/B,IAAA,KAAK,IAAInF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmF,MAAM,CAAC5F,MAAM,EAAES,CAAC,EAAE,EAAE;AACpC2E,MAAAA,IAAI,CAACS,QAAQ,CAACtF,MAAM,GAAGE,CAAC,EAAEmF,MAAM,CAACE,UAAU,CAACrF,CAAC,CAAC,CAAC;AACnD,IAAA;AACJ,EAAA;AACJ;;ACnwBA;AACA;AACA;AACA;;AAEO,MAAMsF,cAAc,CAAC;AAC1B;AACF;AACA;AACA;AACA;AACA;AACA;EACE,MAAMC,IAAIA,CAAC9G,IAAI,EAAE+G,QAAQ,EAAEC,QAAQ,GAAG,EAAE,EAAE;AACxC,IAAA,MAAM,IAAI7H,KAAK,CAAC,wCAAwC,CAAC;AAC3D,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACE,MAAM8H,IAAIA,CAACC,EAAE,EAAE;AACb,IAAA,MAAM,IAAI/H,KAAK,CAAC,wCAAwC,CAAC;AAC3D,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACE,MAAMgI,MAAMA,CAACD,EAAE,EAAE;AACf,IAAA,MAAM,IAAI/H,KAAK,CAAC,0CAA0C,CAAC;AAC7D,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAMiI,IAAIA,GAAG;AACX,IAAA,MAAM,IAAIjI,KAAK,CAAC,wCAAwC,CAAC;AAC3D,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACE,MAAMkI,MAAMA,CAACH,EAAE,EAAE;IACf,IAAI;AACF,MAAA,MAAM,IAAI,CAACD,IAAI,CAACC,EAAE,CAAC;AACnB,MAAA,OAAO,IAAI;IACb,CAAC,CAAC,OAAOtI,KAAK,EAAE;AACd,MAAA,OAAO,KAAK;AACd,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAM0I,KAAKA,GAAG;AACZ,IAAA,MAAMC,KAAK,GAAG,MAAM,IAAI,CAACH,IAAI,EAAE;IAC/B,IAAIvG,KAAK,GAAG,CAAC;AAEb,IAAA,KAAK,MAAM2G,IAAI,IAAID,KAAK,EAAE;MACxB,IAAI;QACF,MAAM,IAAI,CAACJ,MAAM,CAACK,IAAI,CAACN,EAAE,IAAIM,IAAI,CAACT,QAAQ,CAAC;AAC3ClG,QAAAA,KAAK,EAAE;MACT,CAAC,CAAC,OAAOjC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAE4I,IAAI,EAAE5I,KAAK,CAAC;AACtD,MAAA;AACF,IAAA;AAEA,IAAA,OAAOiC,KAAK;AACd,EAAA;AACF;;AC5EA;AACA;AACA;AACA;;AAIO,MAAM4G,gBAAgB,SAASZ,cAAc,CAAC;AACnD;AACF;AACA;AACA;AACA;AACA;AACEtL,EAAAA,WAAWA,CAACmM,MAAM,GAAG,aAAa,EAAEC,SAAS,GAAG,YAAY,EAAEC,OAAO,GAAG,CAAC,EAAE;AACzE,IAAA,KAAK,EAAE;IACP,IAAI,CAACF,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,SAAS,GAAGA,SAAS;IAC1B,IAAI,CAACC,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,EAAE,GAAG,IAAI;AAChB,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAMnK,UAAUA,GAAG;IACjB,IAAI,IAAI,CAACmK,EAAE,EAAE;MACX,OAAO,IAAI,CAACA,EAAE;AAChB,IAAA;AAEA,IAAA,OAAO,IAAI7C,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;AACtC,MAAA,MAAM4C,OAAO,GAAGC,SAAS,CAACC,IAAI,CAAC,IAAI,CAACN,MAAM,EAAE,IAAI,CAACE,OAAO,CAAC;MAEzDE,OAAO,CAACG,OAAO,GAAG,MAAM;QACtB/C,MAAM,CAAC,IAAI/F,KAAK,CAAC,CAAA,0BAAA,EAA6B2I,OAAO,CAAClJ,KAAK,CAAA,CAAE,CAAC,CAAC;MACjE,CAAC;MAEDkJ,OAAO,CAACI,SAAS,GAAG,MAAM;AACxB,QAAA,IAAI,CAACL,EAAE,GAAGC,OAAO,CAACK,MAAM;AACxBlD,QAAAA,OAAO,CAAC,IAAI,CAAC4C,EAAE,CAAC;MAClB,CAAC;AAEDC,MAAAA,OAAO,CAACM,eAAe,GAAI1F,KAAK,IAAK;AACnC,QAAA,MAAMmF,EAAE,GAAGnF,KAAK,CAAC2F,MAAM,CAACF,MAAM;;AAE9B;QACA,IAAI,CAACN,EAAE,CAACS,gBAAgB,CAACC,QAAQ,CAAC,IAAI,CAACZ,SAAS,CAAC,EAAE;UACjD,MAAMa,KAAK,GAAGX,EAAE,CAACY,iBAAiB,CAAC,IAAI,CAACd,SAAS,EAAE;AACjDe,YAAAA,OAAO,EAAE,IAAI;AACbC,YAAAA,aAAa,EAAE;AACjB,WAAC,CAAC;;AAEF;AACAH,UAAAA,KAAK,CAACI,WAAW,CAAC,UAAU,EAAE,UAAU,EAAE;AAAEC,YAAAA,MAAM,EAAE;AAAM,WAAC,CAAC;AAC5DL,UAAAA,KAAK,CAACI,WAAW,CAAC,WAAW,EAAE,WAAW,EAAE;AAAEC,YAAAA,MAAM,EAAE;AAAM,WAAC,CAAC;AAC9DL,UAAAA,KAAK,CAACI,WAAW,CAAC,UAAU,EAAE,UAAU,EAAE;AAAEC,YAAAA,MAAM,EAAE;AAAM,WAAC,CAAC;AAC9D,QAAA;MACF,CAAC;AACH,IAAA,CAAC,CAAC;AACJ,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACE,MAAM/B,IAAIA,CAAC9G,IAAI,EAAE+G,QAAQ,EAAEC,QAAQ,GAAG,EAAE,EAAE;AACxC,IAAA,MAAM,IAAI,CAACtJ,UAAU,EAAE;AAEvB,IAAA,OAAO,IAAIsH,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;AACtC,MAAA,MAAM4D,WAAW,GAAG,IAAI,CAACjB,EAAE,CAACiB,WAAW,CAAC,CAAC,IAAI,CAACnB,SAAS,CAAC,EAAE,WAAW,CAAC;MACtE,MAAMa,KAAK,GAAGM,WAAW,CAACC,WAAW,CAAC,IAAI,CAACpB,SAAS,CAAC;AAErD,MAAA,MAAMqB,MAAM,GAAG;AACbjC,QAAAA,QAAQ,EAAEA,QAAQ;AAClB/G,QAAAA,IAAI,EAAEA,IAAI;QACViJ,IAAI,EAAEjJ,IAAI,CAACiJ,IAAI;QACfzE,IAAI,EAAExE,IAAI,CAACwE,IAAI;AACf3E,QAAAA,SAAS,EAAEN,IAAI,CAACC,GAAG,EAAE;AACrBwH,QAAAA,QAAQ,EAAEA;OACX;AAED,MAAA,MAAMc,OAAO,GAAGU,KAAK,CAACU,GAAG,CAACF,MAAM,CAAC;MAEjClB,OAAO,CAACI,SAAS,GAAG,MAAM;AACxBjD,QAAAA,OAAO,CAACkE,MAAM,CAACrB,OAAO,CAACK,MAAM,CAAC,CAAC;MACjC,CAAC;MAEDL,OAAO,CAACG,OAAO,GAAG,MAAM;QACtB/C,MAAM,CAAC,IAAI/F,KAAK,CAAC,CAAA,0BAAA,EAA6B2I,OAAO,CAAClJ,KAAK,CAAA,CAAE,CAAC,CAAC;MACjE,CAAC;MAEDkK,WAAW,CAACb,OAAO,GAAG,MAAM;QAC1B/C,MAAM,CAAC,IAAI/F,KAAK,CAAC,CAAA,oBAAA,EAAuB2J,WAAW,CAAClK,KAAK,CAAA,CAAE,CAAC,CAAC;MAC/D,CAAC;AACH,IAAA,CAAC,CAAC;AACJ,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACE,MAAMqI,IAAIA,CAACC,EAAE,EAAE;AACb,IAAA,MAAM,IAAI,CAACxJ,UAAU,EAAE;AAEvB,IAAA,OAAO,IAAIsH,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;AACtC,MAAA,MAAM4D,WAAW,GAAG,IAAI,CAACjB,EAAE,CAACiB,WAAW,CAAC,CAAC,IAAI,CAACnB,SAAS,CAAC,EAAE,UAAU,CAAC;MACrE,MAAMa,KAAK,GAAGM,WAAW,CAACC,WAAW,CAAC,IAAI,CAACpB,SAAS,CAAC;MACrD,MAAMG,OAAO,GAAGU,KAAK,CAACY,GAAG,CAACC,MAAM,CAACnC,EAAE,CAAC,CAAC;MAErCY,OAAO,CAACI,SAAS,GAAG,MAAM;AACxB,QAAA,MAAMc,MAAM,GAAGlB,OAAO,CAACK,MAAM;AAC7B,QAAA,IAAIa,MAAM,IAAIA,MAAM,CAAChJ,IAAI,EAAE;AACzBiF,UAAAA,OAAO,CAAC+D,MAAM,CAAChJ,IAAI,CAAC;AACtB,QAAA,CAAC,MAAM;UACLkF,MAAM,CAAC,IAAI/F,KAAK,CAAC,wBAAwB+H,EAAE,CAAA,CAAE,CAAC,CAAC;AACjD,QAAA;MACF,CAAC;MAEDY,OAAO,CAACG,OAAO,GAAG,MAAM;QACtB/C,MAAM,CAAC,IAAI/F,KAAK,CAAC,CAAA,0BAAA,EAA6B2I,OAAO,CAAClJ,KAAK,CAAA,CAAE,CAAC,CAAC;MACjE,CAAC;AACH,IAAA,CAAC,CAAC;AACJ,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACE,MAAMuI,MAAMA,CAACD,EAAE,EAAE;AACf,IAAA,MAAM,IAAI,CAACxJ,UAAU,EAAE;AAEvB,IAAA,OAAO,IAAIsH,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;AACtC,MAAA,MAAM4D,WAAW,GAAG,IAAI,CAACjB,EAAE,CAACiB,WAAW,CAAC,CAAC,IAAI,CAACnB,SAAS,CAAC,EAAE,WAAW,CAAC;MACtE,MAAMa,KAAK,GAAGM,WAAW,CAACC,WAAW,CAAC,IAAI,CAACpB,SAAS,CAAC;MACrD,MAAMG,OAAO,GAAGU,KAAK,CAACrB,MAAM,CAACkC,MAAM,CAACnC,EAAE,CAAC,CAAC;MAExCY,OAAO,CAACI,SAAS,GAAG,MAAM;QACxBjD,OAAO,CAAC,IAAI,CAAC;MACf,CAAC;MAED6C,OAAO,CAACG,OAAO,GAAG,MAAM;QACtB/C,MAAM,CAAC,IAAI/F,KAAK,CAAC,CAAA,4BAAA,EAA+B2I,OAAO,CAAClJ,KAAK,CAAA,CAAE,CAAC,CAAC;MACnE,CAAC;AACH,IAAA,CAAC,CAAC;AACJ,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAMwI,IAAIA,GAAG;AACX,IAAA,MAAM,IAAI,CAAC1J,UAAU,EAAE;AAEvB,IAAA,OAAO,IAAIsH,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;AACtC,MAAA,MAAM4D,WAAW,GAAG,IAAI,CAACjB,EAAE,CAACiB,WAAW,CAAC,CAAC,IAAI,CAACnB,SAAS,CAAC,EAAE,UAAU,CAAC;MACrE,MAAMa,KAAK,GAAGM,WAAW,CAACC,WAAW,CAAC,IAAI,CAACpB,SAAS,CAAC;AACrD,MAAA,MAAMG,OAAO,GAAGU,KAAK,CAACc,MAAM,EAAE;MAE9BxB,OAAO,CAACI,SAAS,GAAG,MAAM;QACxB,MAAMqB,OAAO,GAAGzB,OAAO,CAACK,MAAM,CAACqB,GAAG,CAACR,MAAM,KAAK;AAC5C9B,UAAAA,EAAE,EAAEiC,MAAM,CAACH,MAAM,CAAC9B,EAAE,CAAC;UACrBH,QAAQ,EAAEiC,MAAM,CAACjC,QAAQ;UACzBkC,IAAI,EAAED,MAAM,CAACC,IAAI;UACjBzE,IAAI,EAAEwE,MAAM,CAACxE,IAAI;UACjB3E,SAAS,EAAEmJ,MAAM,CAACnJ,SAAS;AAC3B4J,UAAAA,IAAI,EAAE,IAAIlK,IAAI,CAACyJ,MAAM,CAACnJ,SAAS,CAAC;AAChCmH,UAAAA,QAAQ,EAAEgC,MAAM,CAAChC,QAAQ,IAAI;AAC/B,SAAC,CAAC,CAAC;QACH/B,OAAO,CAACsE,OAAO,CAAC;MAClB,CAAC;MAEDzB,OAAO,CAACG,OAAO,GAAG,MAAM;QACtB/C,MAAM,CAAC,IAAI/F,KAAK,CAAC,CAAA,2BAAA,EAA8B2I,OAAO,CAAClJ,KAAK,CAAA,CAAE,CAAC,CAAC;MAClE,CAAC;AACH,IAAA,CAAC,CAAC;AACJ,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACE,MAAM8K,gBAAgBA,CAAC3C,QAAQ,EAAE;AAC/B,IAAA,MAAM4C,UAAU,GAAG,MAAM,IAAI,CAACvC,IAAI,EAAE;IACpC,OAAOuC,UAAU,CAACC,MAAM,CAACZ,MAAM,IAC7BA,MAAM,CAACjC,QAAQ,CAAC8C,WAAW,EAAE,CAACC,QAAQ,CAAC/C,QAAQ,CAAC8C,WAAW,EAAE,CAC/D,CAAC;AACH,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAME,cAAcA,GAAG;AACrB,IAAA,MAAMR,OAAO,GAAG,MAAM,IAAI,CAACnC,IAAI,EAAE;AACjC,IAAA,MAAM4C,SAAS,GAAGT,OAAO,CAACU,MAAM,CAAC,CAACC,GAAG,EAAElB,MAAM,KAAKkB,GAAG,GAAGlB,MAAM,CAACC,IAAI,EAAE,CAAC,CAAC;IAEvE,OAAO;MACLpI,KAAK,EAAE0I,OAAO,CAACzI,MAAM;AACrBkJ,MAAAA,SAAS,EAAEA,SAAS;AACpBG,MAAAA,WAAW,EAAE,CAACH,SAAS,IAAI,IAAI,GAAG,IAAI,CAAC,EAAEI,OAAO,CAAC,CAAC,CAAC;AACnDb,MAAAA,OAAO,EAAEA;KACV;AACH,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAMjC,KAAKA,GAAG;AACZ,IAAA,MAAM,IAAI,CAAC5J,UAAU,EAAE;AAEvB,IAAA,OAAO,IAAIsH,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;AACtC,MAAA,MAAM4D,WAAW,GAAG,IAAI,CAACjB,EAAE,CAACiB,WAAW,CAAC,CAAC,IAAI,CAACnB,SAAS,CAAC,EAAE,WAAW,CAAC;MACtE,MAAMa,KAAK,GAAGM,WAAW,CAACC,WAAW,CAAC,IAAI,CAACpB,SAAS,CAAC;;AAErD;AACA,MAAA,MAAM0C,YAAY,GAAG7B,KAAK,CAAC3H,KAAK,EAAE;MAElCwJ,YAAY,CAACnC,SAAS,GAAG,MAAM;AAC7B,QAAA,MAAMrH,KAAK,GAAGwJ,YAAY,CAAClC,MAAM;;AAEjC;AACA,QAAA,MAAMmC,YAAY,GAAG9B,KAAK,CAAClB,KAAK,EAAE;QAElCgD,YAAY,CAACpC,SAAS,GAAG,MAAM;UAC7BjD,OAAO,CAACpE,KAAK,CAAC;QAChB,CAAC;QAEDyJ,YAAY,CAACrC,OAAO,GAAG,MAAM;UAC3B/C,MAAM,CAAC,IAAI/F,KAAK,CAAC,CAAA,4BAAA,EAA+BmL,YAAY,CAAC1L,KAAK,CAAA,CAAE,CAAC,CAAC;QACxE,CAAC;MACH,CAAC;MAEDyL,YAAY,CAACpC,OAAO,GAAG,MAAM;QAC3B/C,MAAM,CAAC,IAAI/F,KAAK,CAAC,CAAA,4BAAA,EAA+BkL,YAAY,CAACzL,KAAK,CAAA,CAAE,CAAC,CAAC;MACxE,CAAC;AACH,IAAA,CAAC,CAAC;AACJ,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAM2L,kBAAkBA,GAAG;IACzB,IAAI,SAAS,IAAIhH,SAAS,IAAI,UAAU,IAAIA,SAAS,CAACiH,OAAO,EAAE;MAC7D,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMlH,SAAS,CAACiH,OAAO,CAACC,QAAQ,EAAE;QACnD,OAAO;UACLC,KAAK,EAAED,QAAQ,CAACC,KAAK;UACrBC,KAAK,EAAEF,QAAQ,CAACE,KAAK;AACrBC,UAAAA,OAAO,EAAE,CAACH,QAAQ,CAACC,KAAK,IAAI,IAAI,GAAG,IAAI,CAAC,EAAEN,OAAO,CAAC,CAAC,CAAC;AACpDS,UAAAA,OAAO,EAAE,CAACJ,QAAQ,CAACE,KAAK,IAAI,IAAI,GAAG,IAAI,CAAC,EAAEP,OAAO,CAAC,CAAC,CAAC;AACpDU,UAAAA,YAAY,EAAE,CAAEL,QAAQ,CAACC,KAAK,GAAGD,QAAQ,CAACE,KAAK,GAAI,GAAG,EAAEP,OAAO,CAAC,CAAC;SAClE;MACH,CAAC,CAAC,OAAOxL,KAAK,EAAE;AACdC,QAAAA,OAAO,CAACC,IAAI,CAAC,iCAAiC,EAAEF,KAAK,CAAC;AACtD,QAAA,OAAO,IAAI;AACb,MAAA;AACF,IAAA;AACA,IAAA,OAAO,IAAI;AACb,EAAA;;AAEA;AACF;AACA;AACE4D,EAAAA,KAAKA,GAAG;IACN,IAAI,IAAI,CAACqF,EAAE,EAAE;AACX,MAAA,IAAI,CAACA,EAAE,CAACrF,KAAK,EAAE;MACf,IAAI,CAACqF,EAAE,GAAG,IAAI;AAChB,IAAA;AACF,EAAA;AACF;;ACtRA;AACA;AACA;AACA;;AAIO,MAAMkD,aAAa,SAASlE,cAAc,CAAC;AAChD;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEtL,EAAAA,WAAWA,CAACE,MAAM,GAAG,EAAE,EAAE;AACvB,IAAA,KAAK,EAAE;AACP,IAAA,IAAI,CAACuP,OAAO,GAAGvP,MAAM,CAACuP,OAAO,IAAI,EAAE;AACnC,IAAA,IAAI,CAACC,YAAY,GAAGxP,MAAM,CAACwP,YAAY,IAAI,mBAAmB;AAC9D,IAAA,IAAI,CAACC,YAAY,GAAGzP,MAAM,CAACyP,YAAY,IAAI,kBAAkB;AAC7D,IAAA,IAAI,CAACC,cAAc,GAAG1P,MAAM,CAAC0P,cAAc,IAAI,qBAAqB;AACpE,IAAA,IAAI,CAACC,YAAY,GAAG3P,MAAM,CAAC2P,YAAY,IAAI,iBAAiB;IAC5D,IAAI,CAACC,OAAO,GAAG5P,MAAM,CAAC4P,OAAO,IAAI,EAAE;AACrC,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACE,MAAMvE,IAAIA,CAAC9G,IAAI,EAAE+G,QAAQ,EAAEC,QAAQ,GAAG,EAAE,EAAE;AACxC,IAAA,MAAMsE,QAAQ,GAAG,IAAIC,QAAQ,EAAE;AAC/BD,IAAAA,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAExL,IAAI,CAAC;AACnCsL,IAAAA,QAAQ,CAACE,MAAM,CAAC,gBAAgB,EAAEzE,QAAQ,CAAC;AAE3C,IAAA,IAAIC,QAAQ,IAAIyE,MAAM,CAACC,IAAI,CAAC1E,QAAQ,CAAC,CAAClG,MAAM,GAAG,CAAC,EAAE;MAChDwK,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAEG,IAAI,CAACC,SAAS,CAAC5E,QAAQ,CAAC,CAAC;AACvD,IAAA;IAEA,IAAI;AACF,MAAA,MAAM6E,QAAQ,GAAG,MAAMC,KAAK,CAAC,IAAI,CAACd,OAAO,GAAG,IAAI,CAACC,YAAY,EAAE;AAC7Dc,QAAAA,MAAM,EAAE,MAAM;AACdC,QAAAA,IAAI,EAAEV,QAAQ;QACdD,OAAO,EAAE,IAAI,CAACA;AAChB,OAAC,CAAC;AAEF,MAAA,IAAI,CAACQ,QAAQ,CAACI,EAAE,EAAE;AAChB,QAAA,MAAM,IAAI9M,KAAK,CAAC,CAAA,eAAA,EAAkB0M,QAAQ,CAACK,MAAM,CAAA,CAAA,EAAIL,QAAQ,CAACM,UAAU,CAAA,CAAE,CAAC;AAC7E,MAAA;AAEA,MAAA,MAAMhE,MAAM,GAAG,MAAM0D,QAAQ,CAACO,IAAI,EAAE;;AAEpC;MACA,IAAIjE,MAAM,CAAC0B,WAAW,EAAE,CAACC,QAAQ,CAAC,SAAS,CAAC,EAAE;AAC5C,QAAA,OAAO/C,QAAQ;AACjB,MAAA,CAAC,MAAM;AACL,QAAA,MAAM,IAAI5H,KAAK,CAAC,CAAA,cAAA,EAAiBgJ,MAAM,EAAE,CAAC;AAC5C,MAAA;IACF,CAAC,CAAC,OAAOvJ,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,aAAa,EAAEA,KAAK,CAAC;AACnC,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACE,MAAMqI,IAAIA,CAACF,QAAQ,EAAE;IACnB,IAAI;MACF,MAAMzG,GAAG,GAAG,IAAI,CAAC0K,OAAO,GAAG,IAAI,CAACE,YAAY,GAAGnE,QAAQ;AACvD,MAAA,MAAM8E,QAAQ,GAAG,MAAMC,KAAK,CAACxL,GAAG,EAAE;QAChC+K,OAAO,EAAE,IAAI,CAACA;AAChB,OAAC,CAAC;AAEF,MAAA,IAAI,CAACQ,QAAQ,CAACI,EAAE,EAAE;AAChB,QAAA,MAAM,IAAI9M,KAAK,CAAC,CAAA,aAAA,EAAgB0M,QAAQ,CAACK,MAAM,CAAA,CAAA,EAAIL,QAAQ,CAACM,UAAU,CAAA,CAAE,CAAC;AAC3E,MAAA;AAEA,MAAA,OAAO,MAAMN,QAAQ,CAAC7L,IAAI,EAAE;IAC9B,CAAC,CAAC,OAAOpB,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,aAAa,EAAEA,KAAK,CAAC;AACnC,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACE,MAAMuI,MAAMA,CAACJ,QAAQ,EAAE;IACrB,IAAI;AACF,MAAA,MAAM8E,QAAQ,GAAG,MAAMC,KAAK,CAAC,IAAI,CAACd,OAAO,GAAG,IAAI,CAACG,cAAc,EAAE;AAC/DY,QAAAA,MAAM,EAAE,MAAM;AACdV,QAAAA,OAAO,EAAE;AACP,UAAA,cAAc,EAAE,kBAAkB;AAClC,UAAA,GAAG,IAAI,CAACA;SACT;AACDW,QAAAA,IAAI,EAAEL,IAAI,CAACC,SAAS,CAAC;AAAE7E,UAAAA;SAAU;AACnC,OAAC,CAAC;AAEF,MAAA,IAAI,CAAC8E,QAAQ,CAACI,EAAE,EAAE;AAChB,QAAA,MAAM,IAAI9M,KAAK,CAAC,CAAA,eAAA,EAAkB0M,QAAQ,CAACK,MAAM,CAAA,CAAA,EAAIL,QAAQ,CAACM,UAAU,CAAA,CAAE,CAAC;AAC7E,MAAA;AAEA,MAAA,MAAMhE,MAAM,GAAG,MAAM0D,QAAQ,CAACO,IAAI,EAAE;MACpC,OAAOjE,MAAM,CAAC0B,WAAW,EAAE,CAACC,QAAQ,CAAC,SAAS,CAAC;IACjD,CAAC,CAAC,OAAOlL,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,eAAe,EAAEA,KAAK,CAAC;AACrC,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAMwI,IAAIA,GAAG;IACX,IAAI;AACF,MAAA,MAAMyE,QAAQ,GAAG,MAAMC,KAAK,CAAC,IAAI,CAACd,OAAO,GAAG,IAAI,CAACI,YAAY,EAAE;QAC7DC,OAAO,EAAE,IAAI,CAACA;AAChB,OAAC,CAAC;AAEF,MAAA,IAAI,CAACQ,QAAQ,CAACI,EAAE,EAAE;AAChB,QAAA,MAAM,IAAI9M,KAAK,CAAC,CAAA,aAAA,EAAgB0M,QAAQ,CAACK,MAAM,CAAA,CAAA,EAAIL,QAAQ,CAACM,UAAU,CAAA,CAAE,CAAC;AAC3E,MAAA;AAEA,MAAA,MAAMlJ,IAAI,GAAG,MAAM4I,QAAQ,CAACQ,IAAI,EAAE;MAClC,OAAOC,KAAK,CAACC,OAAO,CAACtJ,IAAI,CAAC,GAAGA,IAAI,GAAG,EAAE;IACxC,CAAC,CAAC,OAAOrE,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,aAAa,EAAEA,KAAK,CAAC;AACnC;AACA,MAAA,OAAO,EAAE;AACX,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACE,EAAA,MAAM4N,gBAAgBA,CAACxM,IAAI,EAAE+G,QAAQ,EAAEC,QAAQ,GAAG,EAAE,EAAEyF,UAAU,GAAG,IAAI,EAAE;AACvE,IAAA,OAAO,IAAIzH,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;AACtC,MAAA,MAAMoG,QAAQ,GAAG,IAAIC,QAAQ,EAAE;AAC/BD,MAAAA,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAExL,IAAI,CAAC;AACnCsL,MAAAA,QAAQ,CAACE,MAAM,CAAC,gBAAgB,EAAEzE,QAAQ,CAAC;AAE3C,MAAA,IAAIC,QAAQ,IAAIyE,MAAM,CAACC,IAAI,CAAC1E,QAAQ,CAAC,CAAClG,MAAM,GAAG,CAAC,EAAE;QAChDwK,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAEG,IAAI,CAACC,SAAS,CAAC5E,QAAQ,CAAC,CAAC;AACvD,MAAA;AAEA,MAAA,MAAM0F,GAAG,GAAG,IAAIC,cAAc,EAAE;;AAEhC;AACA,MAAA,IAAIF,UAAU,EAAE;QACdC,GAAG,CAACE,MAAM,CAACC,gBAAgB,CAAC,UAAU,EAAGC,CAAC,IAAK;UAC7C,IAAIA,CAAC,CAACC,gBAAgB,EAAE;YACtB,MAAMC,OAAO,GAAIF,CAAC,CAACG,MAAM,GAAGH,CAAC,CAAC/L,KAAK,GAAI,GAAG;YAC1C0L,UAAU,CAACO,OAAO,CAAC;AACrB,UAAA;AACF,QAAA,CAAC,CAAC;AACJ,MAAA;;AAEA;AACAN,MAAAA,GAAG,CAACG,gBAAgB,CAAC,MAAM,EAAE,MAAM;QACjC,IAAIH,GAAG,CAACR,MAAM,IAAI,GAAG,IAAIQ,GAAG,CAACR,MAAM,GAAG,GAAG,EAAE;AACzC,UAAA,MAAM/D,MAAM,GAAGuE,GAAG,CAACQ,YAAY;UAC/B,IAAI/E,MAAM,CAAC0B,WAAW,EAAE,CAACC,QAAQ,CAAC,SAAS,CAAC,EAAE;YAC5C7E,OAAO,CAAC8B,QAAQ,CAAC;AACnB,UAAA,CAAC,MAAM;YACL7B,MAAM,CAAC,IAAI/F,KAAK,CAAC,iBAAiBgJ,MAAM,CAAA,CAAE,CAAC,CAAC;AAC9C,UAAA;AACF,QAAA,CAAC,MAAM;AACLjD,UAAAA,MAAM,CAAC,IAAI/F,KAAK,CAAC,kBAAkBuN,GAAG,CAACR,MAAM,CAAA,CAAA,EAAIQ,GAAG,CAACP,UAAU,CAAA,CAAE,CAAC,CAAC;AACrE,QAAA;AACF,MAAA,CAAC,CAAC;;AAEF;AACAO,MAAAA,GAAG,CAACG,gBAAgB,CAAC,OAAO,EAAE,MAAM;AAClC3H,QAAAA,MAAM,CAAC,IAAI/F,KAAK,CAAC,6BAA6B,CAAC,CAAC;AAClD,MAAA,CAAC,CAAC;;AAEF;AACAuN,MAAAA,GAAG,CAACG,gBAAgB,CAAC,OAAO,EAAE,MAAM;AAClC3H,QAAAA,MAAM,CAAC,IAAI/F,KAAK,CAAC,kBAAkB,CAAC,CAAC;AACvC,MAAA,CAAC,CAAC;;AAEF;AACAuN,MAAAA,GAAG,CAAC1E,IAAI,CAAC,MAAM,EAAE,IAAI,CAACgD,OAAO,GAAG,IAAI,CAACC,YAAY,CAAC;;AAElD;MACAQ,MAAM,CAACC,IAAI,CAAC,IAAI,CAACL,OAAO,CAAC,CAACnI,OAAO,CAACiK,GAAG,IAAI;QACvCT,GAAG,CAACU,gBAAgB,CAACD,GAAG,EAAE,IAAI,CAAC9B,OAAO,CAAC8B,GAAG,CAAC,CAAC;AAC9C,MAAA,CAAC,CAAC;AAEFT,MAAAA,GAAG,CAACW,IAAI,CAAC/B,QAAQ,CAAC;AACpB,IAAA,CAAC,CAAC;AACJ,EAAA;AACF;;AC/MA;AACA;AACA;AACA;;AAIO,MAAMgC,eAAe,SAASzG,cAAc,CAAC;AAClD;AACF;AACA;AACA;AACEtL,EAAAA,WAAWA,CAACgS,QAAQ,GAAG,YAAY,EAAE;AACnC,IAAA,KAAK,EAAE;IACP,IAAI,CAACA,QAAQ,GAAGA,QAAQ;;AAExB;IACA,IAAI,OAAO3P,MAAM,KAAK,WAAW,IAAI,CAACA,MAAM,CAAC4P,WAAW,EAAE;AACxD,MAAA,MAAM,IAAIrO,KAAK,CAAC,8EAA8E,CAAC;AACjG,IAAA;AAEA,IAAA,IAAI,CAACqO,WAAW,GAAG5P,MAAM,CAAC4P,WAAW;AACvC,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACE,MAAM1G,IAAIA,CAAC9G,IAAI,EAAE+G,QAAQ,EAAEC,QAAQ,GAAG,EAAE,EAAE;IACxC,IAAI;AACF;AACA,MAAA,MAAMyG,WAAW,GAAG,MAAMzN,IAAI,CAACyN,WAAW,EAAE;;AAE5C;MACA,MAAMzH,MAAM,GAAGsG,KAAK,CAACoB,IAAI,CAAC,IAAIC,UAAU,CAACF,WAAW,CAAC,CAAC;;AAEtD;MACA,MAAMtF,MAAM,GAAG,MAAM,IAAI,CAACqF,WAAW,CAACI,aAAa,CAAC;QAClD7G,QAAQ;QACRf,MAAM;AACNgB,QAAAA,QAAQ,EAAE;AACR,UAAA,GAAGA,QAAQ;UACXiC,IAAI,EAAEjJ,IAAI,CAACiJ,IAAI;UACfzE,IAAI,EAAExE,IAAI,CAACwE,IAAI;AACf3E,UAAAA,SAAS,EAAEN,IAAI,CAACC,GAAG;AACrB;AACF,OAAC,CAAC;MAEF,IAAI2I,MAAM,CAAC0F,OAAO,EAAE;AAClB,QAAA,OAAO1F,MAAM,CAACjB,EAAE,IAAIiB,MAAM,CAACxJ,IAAI;AACjC,MAAA,CAAC,MAAM;QACL,MAAM,IAAIQ,KAAK,CAACgJ,MAAM,CAACvJ,KAAK,IAAI,aAAa,CAAC;AAChD,MAAA;IACF,CAAC,CAAC,OAAOA,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;AAC5C,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACE,MAAMqI,IAAIA,CAAC6G,QAAQ,EAAE;IACnB,IAAI;AACF;MACA,MAAM9H,MAAM,GAAG,MAAM,IAAI,CAACwH,WAAW,CAACO,aAAa,CAACD,QAAQ,CAAC;;AAE7D;AACA,MAAA,MAAME,UAAU,GAAG,IAAIL,UAAU,CAAC3H,MAAM,CAAC;AACzC,MAAA,OAAO,IAAIjB,IAAI,CAAC,CAACiJ,UAAU,CAAC,EAAE;AAAExJ,QAAAA,IAAI,EAAE;AAAY,OAAC,CAAC;IACtD,CAAC,CAAC,OAAO5F,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;AAC5C,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACE,MAAMuI,MAAMA,CAAC2G,QAAQ,EAAE;IACrB,IAAI;MACF,MAAM3F,MAAM,GAAG,MAAM,IAAI,CAACqF,WAAW,CAACS,eAAe,CAACH,QAAQ,CAAC;MAC/D,OAAO3F,MAAM,CAAC0F,OAAO;IACvB,CAAC,CAAC,OAAOjP,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;AAC9C,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACE,EAAA,MAAMwI,IAAIA,CAAC8G,SAAS,GAAG,IAAI,EAAE;IAC3B,IAAI;MACF,MAAMC,UAAU,GAAG,MAAM,IAAI,CAACX,WAAW,CAACY,cAAc,CAACF,SAAS,CAAC;MACnE,OAAOC,UAAU,IAAI,EAAE;IACzB,CAAC,CAAC,OAAOvP,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;AAC5C,MAAA,OAAO,EAAE;AACX,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAMyP,QAAQA,GAAG;IACf,IAAI;AACF,MAAA,IAAI,IAAI,CAACb,WAAW,CAACa,QAAQ,EAAE;AAC7B,QAAA,OAAO,MAAM,IAAI,CAACb,WAAW,CAACa,QAAQ,EAAE;AAC1C,MAAA;AACA,MAAA,MAAM,IAAIlP,KAAK,CAAC,4BAA4B,CAAC;IAC/C,CAAC,CAAC,OAAOP,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;AAChD,MAAA,OAAO,IAAI;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACE,EAAA,MAAM0P,MAAMA,CAACtO,IAAI,EAAEuO,eAAe,GAAG,eAAe,EAAE;IACpD,IAAI;AACF,MAAA,MAAMd,WAAW,GAAG,MAAMzN,IAAI,CAACyN,WAAW,EAAE;MAC5C,MAAMzH,MAAM,GAAGsG,KAAK,CAACoB,IAAI,CAAC,IAAIC,UAAU,CAACF,WAAW,CAAC,CAAC;AAEtD,MAAA,IAAI,IAAI,CAACD,WAAW,CAACc,MAAM,EAAE;QAC3B,MAAMnG,MAAM,GAAG,MAAM,IAAI,CAACqF,WAAW,CAACc,MAAM,CAAC;AAC3CvH,UAAAA,QAAQ,EAAEwH,eAAe;AACzBvI,UAAAA;AACF,SAAC,CAAC;QAEF,OAAOmC,MAAM,CAAC0F,OAAO,GAAG1F,MAAM,CAACxJ,IAAI,GAAG,IAAI;AAC5C,MAAA;;AAEA;MACA,OAAO,MAAM,IAAI,CAACmI,IAAI,CAAC9G,IAAI,EAAEuO,eAAe,CAAC;IAC/C,CAAC,CAAC,OAAO3P,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;AAC9C,MAAA,OAAO,IAAI;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACE,MAAM4P,YAAYA,CAACV,QAAQ,EAAE;IAC3B,IAAI;AACF,MAAA,IAAI,IAAI,CAACN,WAAW,CAACgB,YAAY,EAAE;AACjC,QAAA,MAAM,IAAI,CAAChB,WAAW,CAACgB,YAAY,CAACV,QAAQ,CAAC;AAC7C,QAAA,OAAO,IAAI;AACb,MAAA;AACA,MAAA,OAAO,KAAK;IACd,CAAC,CAAC,OAAOlP,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;AACpD,MAAA,OAAO,KAAK;AACd,IAAA;AACF,EAAA;AACF;;AC5KA;AACA;AACA;AACA;;AAIO,MAAM6P,gBAAgB,SAAS5H,cAAc,CAAC;AACnD;AACF;AACA;AACA;AACEtL,EAAAA,WAAWA,CAAC2S,SAAS,GAAG,YAAY,EAAE;AACpC,IAAA,KAAK,EAAE;IACP,IAAI,CAACA,SAAS,GAAGA,SAAS;;AAE1B;IACA,IAAI,OAAOtQ,MAAM,KAAK,WAAW,IAAI,CAACA,MAAM,CAAC8Q,SAAS,EAAE;AACtD,MAAA,MAAM,IAAIvP,KAAK,CAAC,uEAAuE,CAAC;AAC1F,IAAA;AAEA,IAAA,IAAI,CAACuP,SAAS,GAAG9Q,MAAM,CAAC8Q,SAAS;IACjC,IAAI,CAACC,WAAW,GAAG,KAAK;AAC1B,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAMjR,UAAUA,GAAG;IACjB,IAAI,IAAI,CAACiR,WAAW,EAAE;IAEtB,IAAI;MACF,MAAM;QAAEC,UAAU;AAAEC,QAAAA;AAAU,OAAC,GAAG,IAAI,CAACH,SAAS,CAACI,OAAO;;AAExD;MACA,IAAI;QACF,MAAMF,UAAU,CAACG,OAAO,CAAC;UACvBpQ,IAAI,EAAE,IAAI,CAACuP,SAAS;UACpBA,SAAS,EAAEW,SAAS,CAACG;AACvB,SAAC,CAAC;MACJ,CAAC,CAAC,OAAOlC,CAAC,EAAE;AACV;QACA,MAAM8B,UAAU,CAACK,KAAK,CAAC;UACrBtQ,IAAI,EAAE,IAAI,CAACuP,SAAS;UACpBA,SAAS,EAAEW,SAAS,CAACG,SAAS;AAC9BE,UAAAA,SAAS,EAAE;AACb,SAAC,CAAC;AACJ,MAAA;MAEA,IAAI,CAACP,WAAW,GAAG,IAAI;IACzB,CAAC,CAAC,OAAO/P,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAAC;AACvD,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACE,MAAMkI,IAAIA,CAAC9G,IAAI,EAAE+G,QAAQ,EAAEC,QAAQ,GAAG,EAAE,EAAE;AACxC,IAAA,MAAM,IAAI,CAACtJ,UAAU,EAAE;IAEvB,IAAI;MACF,MAAM;QAAEkR,UAAU;AAAEC,QAAAA;AAAU,OAAC,GAAG,IAAI,CAACH,SAAS,CAACI,OAAO;;AAExD;MACA,MAAMK,UAAU,GAAG,MAAM,IAAI,CAACC,YAAY,CAACpP,IAAI,CAAC;;AAEhD;MACA,MAAM4O,UAAU,CAACS,SAAS,CAAC;AACzB1Q,QAAAA,IAAI,EAAE,CAAA,EAAG,IAAI,CAACuP,SAAS,CAAA,CAAA,EAAInH,QAAQ,CAAA,CAAE;AACrC9D,QAAAA,IAAI,EAAEkM,UAAU;QAChBjB,SAAS,EAAEW,SAAS,CAACG;AACvB,OAAC,CAAC;;AAEF;AACA,MAAA,IAAIhI,QAAQ,IAAIyE,MAAM,CAACC,IAAI,CAAC1E,QAAQ,CAAC,CAAClG,MAAM,GAAG,CAAC,EAAE;AAChD,QAAA,MAAMwO,oBAAoB,GAAG;AAC3B,UAAA,GAAGtI,QAAQ;UACXiC,IAAI,EAAEjJ,IAAI,CAACiJ,IAAI;UACfzE,IAAI,EAAExE,IAAI,CAACwE,IAAI;AACf3E,UAAAA,SAAS,EAAEN,IAAI,CAACC,GAAG;SACpB;QAED,MAAMoP,UAAU,CAACS,SAAS,CAAC;AACzB1Q,UAAAA,IAAI,EAAE,CAAA,EAAG,IAAI,CAACuP,SAAS,CAAA,CAAA,EAAInH,QAAQ,CAAA,UAAA,CAAY;AAC/C9D,UAAAA,IAAI,EAAE0I,IAAI,CAACC,SAAS,CAAC0D,oBAAoB,CAAC;UAC1CpB,SAAS,EAAEW,SAAS,CAACG,SAAS;AAC9BO,UAAAA,QAAQ,EAAE;AACZ,SAAC,CAAC;AACJ,MAAA;AAEA,MAAA,OAAOxI,QAAQ;IACjB,CAAC,CAAC,OAAOnI,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;AAC7C,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACE,MAAMqI,IAAIA,CAACF,QAAQ,EAAE;AACnB,IAAA,MAAM,IAAI,CAACrJ,UAAU,EAAE;IAEvB,IAAI;MACF,MAAM;QAAEkR,UAAU;AAAEC,QAAAA;AAAU,OAAC,GAAG,IAAI,CAACH,SAAS,CAACI,OAAO;AAExD,MAAA,MAAM3G,MAAM,GAAG,MAAMyG,UAAU,CAACY,QAAQ,CAAC;AACvC7Q,QAAAA,IAAI,EAAE,CAAA,EAAG,IAAI,CAACuP,SAAS,CAAA,CAAA,EAAInH,QAAQ,CAAA,CAAE;QACrCmH,SAAS,EAAEW,SAAS,CAACG;AACvB,OAAC,CAAC;;AAEF;MACA,OAAO,IAAI,CAACS,YAAY,CAACtH,MAAM,CAAClF,IAAI,EAAE,WAAW,CAAC;IACpD,CAAC,CAAC,OAAOrE,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;AAC7C,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACE,MAAMuI,MAAMA,CAACJ,QAAQ,EAAE;AACrB,IAAA,MAAM,IAAI,CAACrJ,UAAU,EAAE;IAEvB,IAAI;MACF,MAAM;QAAEkR,UAAU;AAAEC,QAAAA;AAAU,OAAC,GAAG,IAAI,CAACH,SAAS,CAACI,OAAO;;AAExD;MACA,MAAMF,UAAU,CAACc,UAAU,CAAC;AAC1B/Q,QAAAA,IAAI,EAAE,CAAA,EAAG,IAAI,CAACuP,SAAS,CAAA,CAAA,EAAInH,QAAQ,CAAA,CAAE;QACrCmH,SAAS,EAAEW,SAAS,CAACG;AACvB,OAAC,CAAC;;AAEF;MACA,IAAI;QACF,MAAMJ,UAAU,CAACc,UAAU,CAAC;AAC1B/Q,UAAAA,IAAI,EAAE,CAAA,EAAG,IAAI,CAACuP,SAAS,CAAA,CAAA,EAAInH,QAAQ,CAAA,UAAA,CAAY;UAC/CmH,SAAS,EAAEW,SAAS,CAACG;AACvB,SAAC,CAAC;MACJ,CAAC,CAAC,OAAOlC,CAAC,EAAE;AACV;AAAA,MAAA;AAGF,MAAA,OAAO,IAAI;IACb,CAAC,CAAC,OAAOlO,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;AAC/C,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAMwI,IAAIA,GAAG;AACX,IAAA,MAAM,IAAI,CAAC1J,UAAU,EAAE;IAEvB,IAAI;MACF,MAAM;QAAEkR,UAAU;AAAEC,QAAAA;AAAU,OAAC,GAAG,IAAI,CAACH,SAAS,CAACI,OAAO;AAExD,MAAA,MAAM3G,MAAM,GAAG,MAAMyG,UAAU,CAACG,OAAO,CAAC;QACtCpQ,IAAI,EAAE,IAAI,CAACuP,SAAS;QACpBA,SAAS,EAAEW,SAAS,CAACG;AACvB,OAAC,CAAC;;AAEF;AACA,MAAA,MAAMW,UAAU,GAAGxH,MAAM,CAACZ,KAAK,CAACqC,MAAM,CAACgG,CAAC,IAAI,CAACA,CAAC,CAACC,QAAQ,CAAC,YAAY,CAAC,CAAC;;AAEtE;AACA,MAAA,MAAM1B,UAAU,GAAG,MAAMnJ,OAAO,CAAC8K,GAAG,CAClCH,UAAU,CAACnG,GAAG,CAAC,MAAOzC,QAAQ,IAAK;QACjC,IAAIC,QAAQ,GAAG,EAAE;QAEjB,IAAI;AACF,UAAA,MAAM+I,UAAU,GAAG,MAAMnB,UAAU,CAACY,QAAQ,CAAC;AAC3C7Q,YAAAA,IAAI,EAAE,CAAA,EAAG,IAAI,CAACuP,SAAS,CAAA,CAAA,EAAInH,QAAQ,CAAA,UAAA,CAAY;YAC/CmH,SAAS,EAAEW,SAAS,CAACG,SAAS;AAC9BO,YAAAA,QAAQ,EAAE;AACZ,WAAC,CAAC;UACFvI,QAAQ,GAAG2E,IAAI,CAACqE,KAAK,CAACD,UAAU,CAAC9M,IAAI,CAAC;QACxC,CAAC,CAAC,OAAO6J,CAAC,EAAE;AACV;AAAA,QAAA;QAGF,OAAO;AACL5F,UAAAA,EAAE,EAAEH,QAAQ;AACZA,UAAAA,QAAQ,EAAEA,QAAQ;AAClBC,UAAAA,QAAQ,EAAEA,QAAQ;AAClBnH,UAAAA,SAAS,EAAEmH,QAAQ,CAACnH,SAAS,IAAI,CAAC;AAClC4J,UAAAA,IAAI,EAAEzC,QAAQ,CAACnH,SAAS,GAAG,IAAIN,IAAI,CAACyH,QAAQ,CAACnH,SAAS,CAAC,GAAG,IAAI;AAC9DoJ,UAAAA,IAAI,EAAEjC,QAAQ,CAACiC,IAAI,IAAI,CAAC;AACxBzE,UAAAA,IAAI,EAAEwC,QAAQ,CAACxC,IAAI,IAAI;SACxB;AACH,MAAA,CAAC,CACH,CAAC;;AAED;AACA2J,MAAAA,UAAU,CAAC8B,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAACtQ,SAAS,GAAGqQ,CAAC,CAACrQ,SAAS,CAAC;AAEpD,MAAA,OAAOsO,UAAU;IACnB,CAAC,CAAC,OAAOvP,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;AAC7C,MAAA,OAAO,EAAE;AACX,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACE,MAAMwR,MAAMA,CAACrJ,QAAQ,EAAE;AACrB,IAAA,MAAM,IAAI,CAACrJ,UAAU,EAAE;IAEvB,IAAI;MACF,MAAM;QAAEkR,UAAU;AAAEC,QAAAA;AAAU,OAAC,GAAG,IAAI,CAACH,SAAS,CAACI,OAAO;AAExD,MAAA,MAAM3G,MAAM,GAAG,MAAMyG,UAAU,CAACwB,MAAM,CAAC;AACrCzR,QAAAA,IAAI,EAAE,CAAA,EAAG,IAAI,CAACuP,SAAS,CAAA,CAAA,EAAInH,QAAQ,CAAA,CAAE;QACrCmH,SAAS,EAAEW,SAAS,CAACG;AACvB,OAAC,CAAC;MAEF,OAAO7G,MAAM,CAACkI,GAAG;IACnB,CAAC,CAAC,OAAOzR,KAAK,EAAE;AACdC,MAAAA,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;AAC/C,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACEwQ,YAAYA,CAACpP,IAAI,EAAE;AACjB,IAAA,OAAO,IAAIgF,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;AACtC,MAAA,MAAMoL,MAAM,GAAG,IAAIC,UAAU,EAAE;MAC/BD,MAAM,CAACE,SAAS,GAAG,MAAM;AACvB;AACA,QAAA,MAAMC,MAAM,GAAGH,MAAM,CAACnI,MAAM,CAACuI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAC1CzL,OAAO,CAACwL,MAAM,CAAC;MACjB,CAAC;MACDH,MAAM,CAACrI,OAAO,GAAG/C,MAAM;AACvBoL,MAAAA,MAAM,CAACK,aAAa,CAAC3Q,IAAI,CAAC;AAC5B,IAAA,CAAC,CAAC;AACJ,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACEyP,EAAAA,YAAYA,CAACgB,MAAM,EAAEnL,QAAQ,GAAG,WAAW,EAAE;AAC3C,IAAA,MAAMsL,cAAc,GAAGC,IAAI,CAACJ,MAAM,CAAC;IACnC,MAAMK,WAAW,GAAG,IAAIxE,KAAK,CAACsE,cAAc,CAAC9P,MAAM,CAAC;AAEpD,IAAA,KAAK,IAAIS,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGqP,cAAc,CAAC9P,MAAM,EAAES,CAAC,EAAE,EAAE;MAC9CuP,WAAW,CAACvP,CAAC,CAAC,GAAGqP,cAAc,CAAChK,UAAU,CAACrF,CAAC,CAAC;AAC/C,IAAA;AAEA,IAAA,MAAMwP,SAAS,GAAG,IAAIpD,UAAU,CAACmD,WAAW,CAAC;AAC7C,IAAA,OAAO,IAAI/L,IAAI,CAAC,CAACgM,SAAS,CAAC,EAAE;AAAEvM,MAAAA,IAAI,EAAEc;AAAS,KAAC,CAAC;AAClD,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAMyE,cAAcA,GAAG;AACrB,IAAA,MAAMoE,UAAU,GAAG,MAAM,IAAI,CAAC/G,IAAI,EAAE;IACpC,MAAM4C,SAAS,GAAGmE,UAAU,CAAClE,MAAM,CAAC,CAACC,GAAG,EAAE8G,CAAC,KAAK9G,GAAG,IAAI8G,CAAC,CAAC/H,IAAI,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;IAEvE,OAAO;MACLpI,KAAK,EAAEsN,UAAU,CAACrN,MAAM;AACxBkJ,MAAAA,SAAS,EAAEA,SAAS;AACpBG,MAAAA,WAAW,EAAE,CAACH,SAAS,IAAI,IAAI,GAAG,IAAI,CAAC,EAAEI,OAAO,CAAC,CAAC,CAAC;AACnD+D,MAAAA,UAAU,EAAEA;KACb;AACH,EAAA;AACF;;ACpSA;AACA;AACA;AACA;;;AAQA;AACA;AACA;AACA;AACO,MAAM8C,cAAc,CAAC;AAC1B;AACF;AACA;AACA;AACA;AACA;AACA;AACE,EAAA,OAAOC,MAAMA,CAACzV,MAAM,GAAG,EAAE,EAAE;AACzB,IAAA,MAAM+I,IAAI,GAAG/I,MAAM,CAAC+I,IAAI,IAAI,MAAM;AAClC,IAAA,MAAMhJ,OAAO,GAAGC,MAAM,CAACD,OAAO,IAAI,EAAE;;AAEpC;IACA,IAAIgJ,IAAI,KAAK,MAAM,EAAE;AACnB,MAAA,OAAO,IAAI,CAAC2M,UAAU,CAAC3V,OAAO,CAAC;AACjC,IAAA;;AAEA;AACA,IAAA,QAAQgJ,IAAI,CAACqF,WAAW,EAAE;AACxB,MAAA,KAAK,SAAS;AACd,MAAA,KAAK,WAAW;QACd,MAAM;AAAEpC,UAAAA;AAAiB,SAAC,GAAG2J,OAAO,CAAC,uBAAuB,CAAC;AAC7D,QAAA,OAAO,IAAI3J,gBAAgB,CACzBjM,OAAO,CAACkM,MAAM,EACdlM,OAAO,CAACmM,SAAS,EACjBnM,OAAO,CAACoM,OACV,CAAC;AAEH,MAAA,KAAK,UAAU;QACb,MAAM;AAAE0F,UAAAA;AAAgB,SAAC,GAAG8D,OAAO,CAAC,sBAAsB,CAAC;AAC3D,QAAA,OAAO,IAAI9D,eAAe,CAAC9R,OAAO,CAAC+R,QAAQ,CAAC;AAE9C,MAAA,KAAK,WAAW;QACd,MAAM;AAAEkB,UAAAA;AAAiB,SAAC,GAAG2C,OAAO,CAAC,uBAAuB,CAAC;AAC7D,QAAA,OAAO,IAAI3C,gBAAgB,CAACjT,OAAO,CAAC0S,SAAS,CAAC;AAEhD,MAAA,KAAK,QAAQ;AACb,MAAA,KAAK,KAAK;AACV,MAAA,KAAK,QAAQ;QACX,MAAM;AAAEnD,UAAAA;AAAc,SAAC,GAAGqG,OAAO,CAAC,oBAAoB,CAAC;AACvD,QAAA,OAAO,IAAIrG,aAAa,CAACvP,OAAO,CAAC;AAEnC,MAAA;AACE,QAAA,MAAM,IAAI2D,KAAK,CAAC,CAAA,sBAAA,EAAyBqF,IAAI,EAAE,CAAC;AACpD;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACE,EAAA,OAAO2M,UAAUA,CAAC3V,OAAO,GAAG,EAAE,EAAE;AAC9B;IACA,IAAI,OAAOoC,MAAM,KAAK,WAAW,IAAIA,MAAM,CAAC4P,WAAW,EAAE;MACvD,MAAM;AAAEF,QAAAA;AAAgB,OAAC,GAAG8D,OAAO,CAAC,sBAAsB,CAAC;AAC3D,MAAA,OAAO,IAAI9D,eAAe,CAAC9R,OAAO,CAAC+R,QAAQ,CAAC;AAC9C,IAAA;;AAEA;IACA,IAAI,OAAO3P,MAAM,KAAK,WAAW,IAAIA,MAAM,CAAC8Q,SAAS,EAAE;MACrD,MAAM;AAAED,QAAAA;AAAiB,OAAC,GAAG2C,OAAO,CAAC,uBAAuB,CAAC;AAC7D,MAAA,OAAO,IAAI3C,gBAAgB,CAACjT,OAAO,CAAC0S,SAAS,CAAC;AAChD,IAAA;;AAEA;IACA,MAAM;AAAEzG,MAAAA;AAAiB,KAAC,GAAG2J,OAAO,CAAC,uBAAuB,CAAC;AAC7D,IAAA,OAAO,IAAI3J,gBAAgB,CACzBjM,OAAO,CAACkM,MAAM,EACdlM,OAAO,CAACmM,SAAS,EACjBnM,OAAO,CAACoM,OACV,CAAC;AACH,EAAA;AACF;;ACxFA;AACA;AACA;AACA;;AAEO,MAAMyJ,gBAAgB,CAAC;AAC5B;AACF;AACA;AACA;EACE,OAAOC,MAAMA,GAAG;AACd;IACA,IAAI,OAAO1T,MAAM,KAAK,WAAW,IAAIA,MAAM,CAAC4P,WAAW,EAAE;AACvD,MAAA,OAAO,UAAU;AACnB,IAAA;;AAEA;AACA,IAAA,IAAI,OAAO+D,OAAO,KAAK,WAAW,IAAIA,OAAO,CAACC,QAAQ,IAAID,OAAO,CAACC,QAAQ,CAACC,QAAQ,EAAE;AACnF,MAAA,OAAO,UAAU;AACnB,IAAA;;AAEA;IACA,IAAI,OAAO7T,MAAM,KAAK,WAAW,IAAIA,MAAM,CAAC8Q,SAAS,EAAE;AACrD,MAAA,OAAO,WAAW;AACpB,IAAA;;AAEA;AACA,IAAA,OAAO,SAAS;AAClB,EAAA;;AAEA;AACF;AACA;AACA;EACE,OAAOgD,UAAUA,GAAG;AAClB,IAAA,OAAO,IAAI,CAACJ,MAAM,EAAE,KAAK,UAAU;AACrC,EAAA;;AAEA;AACF;AACA;AACA;EACE,OAAOK,WAAWA,GAAG;AACnB,IAAA,OAAO,IAAI,CAACL,MAAM,EAAE,KAAK,WAAW;AACtC,EAAA;;AAEA;AACF;AACA;AACA;EACE,OAAOM,SAASA,GAAG;AACjB,IAAA,OAAO,IAAI,CAACN,MAAM,EAAE,KAAK,SAAS;AACpC,EAAA;;AAEA;AACF;AACA;AACA;EACE,OAAOO,QAAQA,GAAG;IAChB,IAAI,OAAOjU,MAAM,KAAK,WAAW,IAAI,CAACA,MAAM,CAAC2F,SAAS,EAAE;AACtD,MAAA,OAAO,KAAK;AACd,IAAA;IAEA,OAAO,gEAAgE,CAACa,IAAI,CAC1ExG,MAAM,CAAC2F,SAAS,CAACW,SACnB,CAAC;AACH,EAAA;;AAEA;AACF;AACA;AACA;EACE,OAAO4N,oBAAoBA,GAAG;IAC5B,IAAI,OAAOlU,MAAM,KAAK,WAAW,IAAI,CAACA,MAAM,CAACC,YAAY,EAAE;AACzD,MAAA,OAAO,KAAK;AACd,IAAA;IAEA,MAAMF,iBAAiB,GAAGC,MAAM,CAACC,YAAY,IAAID,MAAM,CAACE,kBAAkB;AAC1E,IAAA,OAAO,cAAc,IAAIH,iBAAiB,CAACoU,SAAS;AACtD,EAAA;;AAEA;AACF;AACA;AACA;EACE,OAAOC,uBAAuBA,GAAG;IAC/B,OAAO,OAAOC,eAAe,KAAK,WAAW;AAC/C,EAAA;;AAEA;AACF;AACA;AACA;EACE,OAAOC,OAAOA,GAAG;IACf,OAAO;AACLC,MAAAA,QAAQ,EAAE,IAAI,CAACb,MAAM,EAAE;AACvBI,MAAAA,UAAU,EAAE,IAAI,CAACA,UAAU,EAAE;AAC7BC,MAAAA,WAAW,EAAE,IAAI,CAACA,WAAW,EAAE;AAC/BC,MAAAA,SAAS,EAAE,IAAI,CAACA,SAAS,EAAE;AAC3BC,MAAAA,QAAQ,EAAE,IAAI,CAACA,QAAQ,EAAE;AACzBC,MAAAA,oBAAoB,EAAE,IAAI,CAACA,oBAAoB,EAAE;AACjDE,MAAAA,uBAAuB,EAAE,IAAI,CAACA,uBAAuB,EAAE;MACvD9N,SAAS,EAAE,OAAOX,SAAS,KAAK,WAAW,GAAGA,SAAS,CAACW,SAAS,GAAG;KACrE;AACH,EAAA;AACF;;ACzGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAkBA;AACA;AACA;AACA;AACO,MAAMkO,iBAAiB,CAAC;AAC7B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE7W,EAAAA,WAAWA,CAACC,OAAO,GAAG,EAAE,EAAE;IACxB,IAAI,CAACA,OAAO,GAAG,IAAI,CAAC6W,YAAY,CAAC7W,OAAO,CAAC;IACzC,IAAI,CAACmT,WAAW,GAAG,KAAK;;AAExB;AACA,IAAA,IAAI,CAACnE,OAAO,GAAG,IAAI,CAAC8H,oBAAoB,CAAC,IAAI,CAAC9W,OAAO,CAACgP,OAAO,CAAC;;AAE9D;IACA,IAAI,CAACxN,WAAW,GAAG,KAAK;IACxB,IAAI,CAACC,QAAQ,GAAG,KAAK;IACrB,IAAI,CAACsV,WAAW,GAAG,IAAI;;AAEvB;AACA,IAAA,IAAI,IAAI,CAAC/W,OAAO,CAACgX,SAAS,EAAE;MAC1B,IAAI,CAACC,YAAY,EAAE;AACrB,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACEJ,YAAYA,CAAC7W,OAAO,EAAE;AACpB,IAAA,MAAMkX,QAAQ,GAAG;AACfF,MAAAA,SAAS,EAAE,IAAI;AACfG,MAAAA,MAAM,EAAE,MAAM;AACdC,MAAAA,KAAK,EAAE,OAAO;AAEdxP,MAAAA,KAAK,EAAE;AACL1H,QAAAA,UAAU,EAAE,KAAK;AACjBmX,QAAAA,QAAQ,EAAE,CAAC;AACXC,QAAAA,GAAG,EAAE,KAAK;AACV5U,QAAAA,IAAI,EAAE;OACP;AAED6U,MAAAA,QAAQ,EAAE;AACRC,QAAAA,YAAY,EAAE,IAAI;AAClBC,QAAAA,eAAe,EAAE,IAAI;AACrBC,QAAAA,QAAQ,EAAE,IAAI;AACdC,QAAAA,UAAU,EAAE,EAAE;AACdC,QAAAA,MAAM,EAAE;AACNL,UAAAA,QAAQ,EAAE,SAAS;AACnBM,UAAAA,SAAS,EAAE,SAAS;AACpBC,UAAAA,QAAQ,EAAE;AACZ;OACD;AAED9I,MAAAA,OAAO,EAAE;AACPhG,QAAAA,IAAI,EAAE;OACP;AAED+O,MAAAA,SAAS,EAAE;AACTC,QAAAA,aAAa,EAAEA,MAAM,CAAC,CAAC;AACvBC,QAAAA,YAAY,EAAEA,MAAM,CAAC,CAAC;AACtBC,QAAAA,aAAa,EAAEA,MAAM,CAAC,CAAC;AACvBC,QAAAA,cAAc,EAAEA,MAAM,CAAC,CAAC;AACxBC,QAAAA,WAAW,EAAEA,MAAM,CAAC,CAAC;AACrBC,QAAAA,UAAU,EAAEA,MAAM,CAAC,CAAC;QACpBC,OAAO,EAAGlV,KAAK,IAAKC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK;AACrE;KACD;;AAED;AACA,IAAA,OAAO,IAAI,CAACmV,SAAS,CAACrB,QAAQ,EAAElX,OAAO,CAAC;AAC1C,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACEuY,EAAAA,SAASA,CAAC1L,MAAM,EAAE1E,MAAM,EAAE;AACxB,IAAA,MAAMwE,MAAM,GAAG;MAAE,GAAGE;KAAQ;AAE5B,IAAA,KAAK,MAAM8E,GAAG,IAAIxJ,MAAM,EAAE;AACxB,MAAA,IAAIA,MAAM,CAACwJ,GAAG,CAAC,YAAY1B,MAAM,IAAI,CAACa,KAAK,CAACC,OAAO,CAAC5I,MAAM,CAACwJ,GAAG,CAAC,CAAC,EAAE;QAChEhF,MAAM,CAACgF,GAAG,CAAC,GAAG,IAAI,CAAC4G,SAAS,CAAC5L,MAAM,CAACgF,GAAG,CAAC,IAAI,EAAE,EAAExJ,MAAM,CAACwJ,GAAG,CAAC,CAAC;AAC9D,MAAA,CAAC,MAAM;AACLhF,QAAAA,MAAM,CAACgF,GAAG,CAAC,GAAGxJ,MAAM,CAACwJ,GAAG,CAAC;AAC3B,MAAA;AACF,IAAA;AAEA,IAAA,OAAOhF,MAAM;AACf,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACEmK,oBAAoBA,CAAC0B,aAAa,EAAE;IAClC,MAAM;AAAE/C,MAAAA;AAAe,KAAC,GAAGG,OAAO,CAAC,oBAAoB,CAAC;IACxD,OAAOH,cAAc,CAACC,MAAM,CAAC;AAC3B1M,MAAAA,IAAI,EAAEwP,aAAa,CAACxP,IAAI,IAAI,MAAM;AAClChJ,MAAAA,OAAO,EAAEwY;AACX,KAAC,CAAC;AACJ,EAAA;;AAEA;AACF;AACA;AACEvB,EAAAA,YAAYA,GAAG;AACb;AACA;AACA5T,IAAAA,OAAO,CAACoV,GAAG,CAAC,uCAAuC,CAAC;AACtD,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAM/U,cAAcA,GAAG;IACrB,IAAI;MACF,IAAI,IAAI,CAAClC,WAAW,EAAE;AACpB,QAAA,MAAM,IAAImC,KAAK,CAAC,mBAAmB,CAAC;AACtC,MAAA;;AAEA;MACA,IAAI,CAACnC,WAAW,GAAG,IAAI;AACvB,MAAA,IAAI,CAACxB,OAAO,CAAC+X,SAAS,CAACC,aAAa,EAAE;AAEtC3U,MAAAA,OAAO,CAACoV,GAAG,CAAC,mBAAmB,CAAC;IAClC,CAAC,CAAC,OAAOrV,KAAK,EAAE;MACd,IAAI,CAACpD,OAAO,CAAC+X,SAAS,CAACO,OAAO,CAAClV,KAAK,CAAC;AACrC,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAMmB,aAAaA,GAAG;IACpB,IAAI;AACF,MAAA,IAAI,CAAC,IAAI,CAAC/C,WAAW,EAAE;AACrB,QAAA,MAAM,IAAImC,KAAK,CAAC,eAAe,CAAC;AAClC,MAAA;;AAEA;MACA,IAAI,CAACnC,WAAW,GAAG,KAAK;;AAExB;AACA,MAAA,IAAI,CAACuV,WAAW,GAAG,IAAI,CAAC;;MAExB,IAAI,CAAC/W,OAAO,CAAC+X,SAAS,CAACE,YAAY,CAAC,IAAI,CAAClB,WAAW,CAAC;AAErD1T,MAAAA,OAAO,CAACoV,GAAG,CAAC,mBAAmB,CAAC;MAChC,OAAO,IAAI,CAAC1B,WAAW;IACzB,CAAC,CAAC,OAAO3T,KAAK,EAAE;MACd,IAAI,CAACpD,OAAO,CAAC+X,SAAS,CAACO,OAAO,CAAClV,KAAK,CAAC;AACrC,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAM4B,cAAcA,GAAG;IACrB,IAAI;MACF,IAAI,CAAC,IAAI,CAACxD,WAAW,IAAI,IAAI,CAACC,QAAQ,EAAE;AACtC,QAAA,MAAM,IAAIkC,KAAK,CAAC,cAAc,CAAC;AACjC,MAAA;MAEA,IAAI,CAAClC,QAAQ,GAAG,IAAI;AACpB,MAAA,IAAI,CAACzB,OAAO,CAAC+X,SAAS,CAACG,aAAa,EAAE;AAEtC7U,MAAAA,OAAO,CAACoV,GAAG,CAAC,kBAAkB,CAAC;IACjC,CAAC,CAAC,OAAOrV,KAAK,EAAE;MACd,IAAI,CAACpD,OAAO,CAAC+X,SAAS,CAACO,OAAO,CAAClV,KAAK,CAAC;AACrC,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAM6B,eAAeA,GAAG;IACtB,IAAI;MACF,IAAI,CAAC,IAAI,CAACzD,WAAW,IAAI,CAAC,IAAI,CAACC,QAAQ,EAAE;AACvC,QAAA,MAAM,IAAIkC,KAAK,CAAC,eAAe,CAAC;AAClC,MAAA;MAEA,IAAI,CAAClC,QAAQ,GAAG,KAAK;AACrB,MAAA,IAAI,CAACzB,OAAO,CAAC+X,SAAS,CAACI,cAAc,EAAE;AAEvC9U,MAAAA,OAAO,CAACoV,GAAG,CAAC,mBAAmB,CAAC;IAClC,CAAC,CAAC,OAAOrV,KAAK,EAAE;MACd,IAAI,CAACpD,OAAO,CAAC+X,SAAS,CAACO,OAAO,CAAClV,KAAK,CAAC;AACrC,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAMsV,IAAIA,GAAG;IACX,IAAI;AACF;AACA,MAAA,IAAI,CAAC1Y,OAAO,CAAC+X,SAAS,CAACK,WAAW,EAAE;AAEpC/U,MAAAA,OAAO,CAACoV,GAAG,CAAC,kBAAkB,CAAC;IACjC,CAAC,CAAC,OAAOrV,KAAK,EAAE;MACd,IAAI,CAACpD,OAAO,CAAC+X,SAAS,CAACO,OAAO,CAAClV,KAAK,CAAC;AACrC,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAMoF,IAAIA,GAAG;IACX,IAAI;AACF;AACA,MAAA,IAAI,CAACxI,OAAO,CAAC+X,SAAS,CAACM,UAAU,EAAE;AAEnChV,MAAAA,OAAO,CAACoV,GAAG,CAAC,kBAAkB,CAAC;IACjC,CAAC,CAAC,OAAOrV,KAAK,EAAE;MACd,IAAI,CAACpD,OAAO,CAAC+X,SAAS,CAACO,OAAO,CAAClV,KAAK,CAAC;AACrC,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACE,EAAA,MAAMgP,aAAaA,CAAC5N,IAAI,GAAG,IAAI,EAAE+G,QAAQ,GAAG,IAAI,EAAEC,QAAQ,GAAG,EAAE,EAAE;IAC/D,IAAI;AACF,MAAA,MAAMmN,UAAU,GAAGnU,IAAI,IAAI,IAAI,CAACuS,WAAW;MAE3C,IAAI,CAAC4B,UAAU,EAAE;AACf,QAAA,MAAM,IAAIhV,KAAK,CAAC,sBAAsB,CAAC;AACzC,MAAA;MAEA,MAAMiV,aAAa,GAAGrN,QAAQ,IAAI,CAAA,UAAA,EAAaxH,IAAI,CAACC,GAAG,EAAE,CAAA,IAAA,CAAM;AAE/D,MAAA,MAAM0H,EAAE,GAAG,MAAM,IAAI,CAACsD,OAAO,CAAC1D,IAAI,CAACqN,UAAU,EAAEC,aAAa,EAAEpN,QAAQ,CAAC;AAEvEnI,MAAAA,OAAO,CAACoV,GAAG,CAAC,kBAAkB,EAAE/M,EAAE,CAAC;AACnC,MAAA,OAAOA,EAAE;IACX,CAAC,CAAC,OAAOtI,KAAK,EAAE;MACd,IAAI,CAACpD,OAAO,CAAC+X,SAAS,CAACO,OAAO,CAAClV,KAAK,CAAC;AACrC,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACE,MAAMmP,aAAaA,CAAC7G,EAAE,EAAE;IACtB,IAAI;MACF,MAAMlH,IAAI,GAAG,MAAM,IAAI,CAACwK,OAAO,CAACvD,IAAI,CAACC,EAAE,CAAC;MACxC,IAAI,CAACqL,WAAW,GAAGvS,IAAI;AAEvBnB,MAAAA,OAAO,CAACoV,GAAG,CAAC,mBAAmB,EAAE/M,EAAE,CAAC;AACpC,MAAA,OAAOlH,IAAI;IACb,CAAC,CAAC,OAAOpB,KAAK,EAAE;MACd,IAAI,CAACpD,OAAO,CAAC+X,SAAS,CAACO,OAAO,CAAClV,KAAK,CAAC;AACrC,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACA;EACE,MAAMqP,eAAeA,CAAC/G,EAAE,EAAE;IACxB,IAAI;MACF,MAAMiB,MAAM,GAAG,MAAM,IAAI,CAACqC,OAAO,CAACrD,MAAM,CAACD,EAAE,CAAC;AAE5CrI,MAAAA,OAAO,CAACoV,GAAG,CAAC,oBAAoB,EAAE/M,EAAE,CAAC;AACrC,MAAA,OAAOiB,MAAM;IACf,CAAC,CAAC,OAAOvJ,KAAK,EAAE;MACd,IAAI,CAACpD,OAAO,CAAC+X,SAAS,CAACO,OAAO,CAAClV,KAAK,CAAC;AACrC,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;EACE,MAAMwP,cAAcA,GAAG;IACrB,IAAI;MACF,MAAMD,UAAU,GAAG,MAAM,IAAI,CAAC3D,OAAO,CAACpD,IAAI,EAAE;MAE5CvI,OAAO,CAACoV,GAAG,CAAC,oBAAoB,EAAE9F,UAAU,CAACrN,MAAM,CAAC;AACpD,MAAA,OAAOqN,UAAU;IACnB,CAAC,CAAC,OAAOvP,KAAK,EAAE;MACd,IAAI,CAACpD,OAAO,CAAC+X,SAAS,CAACO,OAAO,CAAClV,KAAK,CAAC;AACrC,MAAA,MAAMA,KAAK;AACb,IAAA;AACF,EAAA;;AAEA;AACF;AACA;AACA;AACEyV,EAAAA,cAAcA,GAAG;IACf,OAAO,IAAI,CAAC9B,WAAW;AACzB,EAAA;;AAEA;AACF;AACA;AACE+B,EAAAA,OAAOA,GAAG;AACR;IACA,IAAI,CAACtX,WAAW,GAAG,KAAK;IACxB,IAAI,CAACC,QAAQ,GAAG,KAAK;IACrB,IAAI,CAACsV,WAAW,GAAG,IAAI;AAEvB,IAAA,IAAI,IAAI,CAAC/H,OAAO,IAAI,OAAO,IAAI,CAACA,OAAO,CAAChI,KAAK,KAAK,UAAU,EAAE;AAC5D,MAAA,IAAI,CAACgI,OAAO,CAAChI,KAAK,EAAE;AACtB,IAAA;AAEA3D,IAAAA,OAAO,CAACoV,GAAG,CAAC,6BAA6B,CAAC;AAC5C,EAAA;AACF;;AAKA;AACA;AACA;AACO,MAAMM,OAAO,GAAG;;AAEvB;AACA;AACA;AACO,MAAMC,UAAU,GAAG;AACxB5M,EAAAA,OAAO,EAAE2M,OAAO;EAChB9K,IAAI,EAAE,IAAIlK,IAAI,EAAE,CAACkV,WAAW,EAAE;AAC9B5Q,EAAAA,IAAI,EAAE;AACR;;;;"}