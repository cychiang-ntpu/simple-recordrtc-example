<!DOCTYPE html>
<head>
    <!-- 頁面標題 -->
    <title>Process RAW PCM data using RecordRTC</title>
    <!-- 字符編碼設定 -->
    <meta charset="utf-8">
    <!-- 響應式設計 viewport 設定：禁止使用者縮放 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
    <!-- 引入自定義樣式表 -->
    <link rel="stylesheet" href="assets/css/style.css">
    <!-- 移除 WaveSurfer.js，改用原生 Canvas 實現波形顯示 -->
</head>

<body>
<!-- 主標題：說明使用 RecordRTC 處理 PCM 數據 -->
<h1>Process RAW PCM data using RecordRTC</h1>
<!-- 示例文字：用於測試錄音的中文語句 -->
<h2>請念：以二號女友為例，她堅持不下廚，你要娶一個巧婦，就形成對立局面。</h2>
<!-- 顯示錄音時長的區域 -->
<h3>length</h3>
<!-- 預留的標題區域 -->
<h4>what?</h4>

<!-- AGC 控制區域 -->
<div class="agc-container">
    <label class="agc-label">
        <input type="checkbox" id="agc-toggle" checked>
        <span>啟用自動增益控制 (AGC)</span>
    </label>
    <small class="agc-hint">關閉可減少錄音啟動延遲，但音量可能較小且不穩定</small>
</div>

<!-- 錄音控制按鈕區域 -->
<div class="button-container">
    <button id="btn-toggle-recording" class="recording-toggle">● 開始錄音</button>
    <button id="accum-play-selection" class="play-button">▶ 播放</button>
    <button id="btn-download-recording" disabled>下載錄音</button>
</div>

<!-- 即時波形顯示 -->
<canvas id="waveform" width="750" height="200"></canvas>

<!-- 累積波形顯示 -->
<canvas id="accumulated-waveform" width="750" height="140"></canvas>

<!-- 全局波形顯示 (縮覽圖) -->
<canvas id="overview-waveform" width="750" height="80"></canvas>

<div id="accumulated-toolbar" class="waveform-toolbar">
    <button type="button" id="accum-pan-left">&larr; 向左</button>
    <button type="button" id="accum-zoom-out">縮小</button>
    <button type="button" id="accum-zoom-in">放大</button>
    <button type="button" id="accum-pan-right">向右 &rarr;</button>
    <button type="button" id="accum-zoom-reset">重置視圖</button>
    <span class="hint">電腦：拖曳平移 | Shift+拖曳選取/拉伸 | Ctrl+滾輪縮放<br>手機：拖曳平移 | 長按選取 | 拖曳綠色圓點調整</span>
</div>

<br>

<!-- HTML5 音頻播放控制器
     - controls: 顯示播放控制界面
     - playsinline: 在移動設備上內聯播放 -->
<audio controls playsinline></audio>

<!-- 分隔線 -->
<hr>

<!-- 錄音片段容器：用於顯示所有錄音片段及其波形 -->
<div id="audio-blobs-container" style="margin-top: 20px;">
    <h2 style="margin-bottom: 20px;">Audio Blobs Goes Here:</h2>
</div>

<!-- 引入 RecordRTC 錄音庫 -->
<script src="assets/js/RecordRTC.js"></script>
<!-- 引入應用程式主腳本 -->
<script src="assets/js/app.js"></script>

<!-- 頁腳區域 -->
<footer style="margin-top: 20px;">
    <small id="send-message"></small>
</footer>

<!-- 引入共用腳本（webrtc-experiment.com 的通用函數） -->
<script src="https://www.webrtc-experiment.com/common.js"></script>
</body>
</html>